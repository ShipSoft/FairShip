<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FairShip: shipStrawTracking Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FairShip
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceshipStrawTracking.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">shipStrawTracking Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a42f7b2c895655a7254fe343ffc57bbf4" id="r_a42f7b2c895655a7254fe343ffc57bbf4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a42f7b2c895655a7254fe343ffc57bbf4">get_n_hits</a> (hits)</td></tr>
<tr class="separator:a42f7b2c895655a7254fe343ffc57bbf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a729a81fdf3b076167754cd505e3ea6fb" id="r_a729a81fdf3b076167754cd505e3ea6fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a729a81fdf3b076167754cd505e3ea6fb">cmp</a> (a, b)</td></tr>
<tr class="separator:a729a81fdf3b076167754cd505e3ea6fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41edd2c3b1e3c557bed66f1a7bc69a34" id="r_a41edd2c3b1e3c557bed66f1a7bc69a34"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a41edd2c3b1e3c557bed66f1a7bc69a34">run_track_pattern_recognition</a> (input_file, geo_file, output_file, method)</td></tr>
<tr class="separator:a41edd2c3b1e3c557bed66f1a7bc69a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc66dfda583a285e93e3230b61844e05" id="r_adc66dfda583a285e93e3230b61844e05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#adc66dfda583a285e93e3230b61844e05">extrapolateToPlane</a> (fT, z)</td></tr>
<tr class="separator:adc66dfda583a285e93e3230b61844e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a005e72c92291692e5a0b39ae98d0ab13" id="r_a005e72c92291692e5a0b39ae98d0ab13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a005e72c92291692e5a0b39ae98d0ab13">fracMCsame</a> (trackids)</td></tr>
<tr class="separator:a005e72c92291692e5a0b39ae98d0ab13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c436ec5b0ea6b2c4c162ce393227dfe" id="r_a1c436ec5b0ea6b2c4c162ce393227dfe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a1c436ec5b0ea6b2c4c162ce393227dfe">getReconstructibleTracks</a> (iEvent, sTree, sGeo, ShipGeo)</td></tr>
<tr class="separator:a1c436ec5b0ea6b2c4c162ce393227dfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd5476d8c8880a51e22ca2334c0c30e3" id="r_afd5476d8c8880a51e22ca2334c0c30e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#afd5476d8c8880a51e22ca2334c0c30e3">getPtruthFirst</a> (sTree, mcPartKey)</td></tr>
<tr class="separator:afd5476d8c8880a51e22ca2334c0c30e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875df7febec3679ada1619e7c347dac1" id="r_a875df7febec3679ada1619e7c347dac1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a875df7febec3679ada1619e7c347dac1">save_hists</a> (h, path)</td></tr>
<tr class="memdesc:a875df7febec3679ada1619e7c347dac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helping functions #####################################################.  <br /></td></tr>
<tr class="separator:a875df7febec3679ada1619e7c347dac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f8170056fea500eadaec343a3b75173" id="r_a6f8170056fea500eadaec343a3b75173"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a6f8170056fea500eadaec343a3b75173">init_book_hist</a> ()</td></tr>
<tr class="separator:a6f8170056fea500eadaec343a3b75173"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6f1c8ab4a8627d83bd87a950231721c6" id="r_a6f1c8ab4a8627d83bd87a950231721c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a6f1c8ab4a8627d83bd87a950231721c6">parser</a> = ArgumentParser(description=__doc__)</td></tr>
<tr class="separator:a6f1c8ab4a8627d83bd87a950231721c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc9eca6c9f512fcddfc991f29bac4b87" id="r_abc9eca6c9f512fcddfc991f29bac4b87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#abc9eca6c9f512fcddfc991f29bac4b87">help</a></td></tr>
<tr class="separator:abc9eca6c9f512fcddfc991f29bac4b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33f41ada450d677435ffd880e7462d3a" id="r_a33f41ada450d677435ffd880e7462d3a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a33f41ada450d677435ffd880e7462d3a">required</a></td></tr>
<tr class="separator:a33f41ada450d677435ffd880e7462d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11c0a12bc12c6f289a0eb2ccb0c01a53" id="r_a11c0a12bc12c6f289a0eb2ccb0c01a53"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a11c0a12bc12c6f289a0eb2ccb0c01a53">default</a></td></tr>
<tr class="separator:a11c0a12bc12c6f289a0eb2ccb0c01a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a348735a590af3f354f03a440fd23573b" id="r_a348735a590af3f354f03a440fd23573b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a348735a590af3f354f03a440fd23573b">choices</a></td></tr>
<tr class="separator:a348735a590af3f354f03a440fd23573b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a227a906d2ad0b9acf995e73827e33015" id="r_a227a906d2ad0b9acf995e73827e33015"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a227a906d2ad0b9acf995e73827e33015">options</a> = parser.parse_args()</td></tr>
<tr class="separator:a227a906d2ad0b9acf995e73827e33015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5999ce65eda12da41dc6c1d663202168" id="r_a5999ce65eda12da41dc6c1d663202168"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceshipStrawTracking.html#a5999ce65eda12da41dc6c1d663202168">metrics</a> = <a class="el" href="namespaceshipStrawTracking.html#a41edd2c3b1e3c557bed66f1a7bc69a34">run_track_pattern_recognition</a>(options.input, options.geo, options.output, options.method)</td></tr>
<tr class="separator:a5999ce65eda12da41dc6c1d663202168"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Script to run and test tracking in the straw tubes</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a729a81fdf3b076167754cd505e3ea6fb" name="a729a81fdf3b076167754cd505e3ea6fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a729a81fdf3b076167754cd505e3ea6fb">&#9670;&#160;</a></span>cmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.cmp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00022">22</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   22</span><span class="keyword">def </span>cmp(a, b):</div>
<div class="line"><span class="lineno">   23</span>    <span class="keywordflow">return</span> (a &gt; b) - (a &lt; b)</div>
<div class="line"><span class="lineno">   24</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adc66dfda583a285e93e3230b61844e05" name="adc66dfda583a285e93e3230b61844e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc66dfda583a285e93e3230b61844e05">&#9670;&#160;</a></span>extrapolateToPlane()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.extrapolateToPlane </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00509">509</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  509</span><span class="keyword">def </span>extrapolateToPlane(fT,z):</div>
<div class="line"><span class="lineno">  510</span>    <span class="comment"># etrapolate to a plane perpendicular to beam direction (z)</span></div>
<div class="line"><span class="lineno">  511</span>    rc,pos,mom = <span class="keyword">False</span>,<span class="keywordtype">None</span>,<span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  512</span>    parallelToZ = ROOT.TVector3(0., 0., 1.)</div>
<div class="line"><span class="lineno">  513</span>    fst = fT.getFitStatus()</div>
<div class="line"><span class="lineno">  514</span>    <span class="keywordflow">if</span> fst.isFitConverged():</div>
<div class="line"><span class="lineno">  515</span>        <span class="comment"># test for fit status for each point</span></div>
<div class="line"><span class="lineno">  516</span>        <span class="keywordflow">if</span> fT.getPoint(0).getFitterInfo() <span class="keywordflow">and</span> fT.getPoint(1).getFitterInfo():</div>
<div class="line"><span class="lineno">  517</span>            fstate0,fstate1 = fT.getFittedState(0),fT.getFittedState(1)</div>
<div class="line"><span class="lineno">  518</span>            fPos0,fPos1     = fstate0.getPos(),fstate1.getPos()</div>
<div class="line"><span class="lineno">  519</span>            <span class="keywordflow">if</span> abs(z-fPos0.z()) &lt;  abs(z-fPos1.z()): fstate = fstate0</div>
<div class="line"><span class="lineno">  520</span>            <span class="keywordflow">else</span>:                                    fstate = fstate1</div>
<div class="line"><span class="lineno">  521</span>            zs = z</div>
<div class="line"><span class="lineno">  522</span>            NewPosition = ROOT.TVector3(0., 0., zs)</div>
<div class="line"><span class="lineno">  523</span>            rep    = ROOT.genfit.RKTrackRep(13*cmp(fstate.getPDG(),0) )</div>
<div class="line"><span class="lineno">  524</span>            state  = ROOT.genfit.StateOnPlane(rep)</div>
<div class="line"><span class="lineno">  525</span>            pos,mom = fstate.getPos(),fstate.getMom()</div>
<div class="line"><span class="lineno">  526</span>            rep.setPosMom(state,pos,mom)</div>
<div class="line"><span class="lineno">  527</span>            detPlane = ROOT.genfit.DetPlane(NewPosition, parallelToZ)</div>
<div class="line"><span class="lineno">  528</span>            detPlanePtr = ROOT.genfit.SharedPlanePtr(detPlane)</div>
<div class="line"><span class="lineno">  529</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  530</span>                rep.extrapolateToPlane(state, detPlanePtr)</div>
<div class="line"><span class="lineno">  531</span>                pos,mom = state.getPos(),state.getMom()</div>
<div class="line"><span class="lineno">  532</span>                rc = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  533</span>            <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">  534</span>                print(<span class="stringliteral">&#39;error with extrapolation&#39;</span>)</div>
<div class="line"><span class="lineno">  535</span>                <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  536</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> rc:</div>
<div class="line"><span class="lineno">  537</span>                <span class="comment"># use linear extrapolation</span></div>
<div class="line"><span class="lineno">  538</span>                px,py,pz  = mom.X(),mom.Y(),mom.Z()</div>
<div class="line"><span class="lineno">  539</span>                lam = (z-pos.Z())/pz</div>
<div class="line"><span class="lineno">  540</span>                pos = ROOT.TVector3( pos.X()+lam*px, pos.Y()+lam*py, z )</div>
<div class="line"><span class="lineno">  541</span>    <span class="keywordflow">return</span> rc,pos,mom</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a005e72c92291692e5a0b39ae98d0ab13" name="a005e72c92291692e5a0b39ae98d0ab13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a005e72c92291692e5a0b39ae98d0ab13">&#9670;&#160;</a></span>fracMCsame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.fracMCsame </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>trackids</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Estimates max fraction of true hit labels for a recognized track.
trackids : array_like
    hit indexes of a recognized track
Returns
-------
frac : float
    Max fraction of true hit labels.
tmax : int
    True hit label with max fraction in a recognized track.
</pre> 
<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00547">547</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  547</span><span class="keyword">def </span>fracMCsame(trackids):</div>
<div class="line"><span class="lineno">  548</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  549</span><span class="stringliteral">    Estimates max fraction of true hit labels for a recognized track.</span></div>
<div class="line"><span class="lineno">  550</span><span class="stringliteral">    trackids : array_like</span></div>
<div class="line"><span class="lineno">  551</span><span class="stringliteral">        hit indexes of a recognized track</span></div>
<div class="line"><span class="lineno">  552</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  553</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  554</span><span class="stringliteral">    frac : float</span></div>
<div class="line"><span class="lineno">  555</span><span class="stringliteral">        Max fraction of true hit labels.</span></div>
<div class="line"><span class="lineno">  556</span><span class="stringliteral">    tmax : int</span></div>
<div class="line"><span class="lineno">  557</span><span class="stringliteral">        True hit label with max fraction in a recognized track.</span></div>
<div class="line"><span class="lineno">  558</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>    track={}</div>
<div class="line"><span class="lineno">  561</span>    nh=len(trackids)</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">for</span> tid <span class="keywordflow">in</span> trackids:</div>
<div class="line"><span class="lineno">  564</span>        <span class="keywordflow">if</span> tid <span class="keywordflow">in</span> track:</div>
<div class="line"><span class="lineno">  565</span>            track[tid] += 1</div>
<div class="line"><span class="lineno">  566</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  567</span>            track[tid] = 1</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>    <span class="comment">#now get track with largest number of hits</span></div>
<div class="line"><span class="lineno">  570</span>    <span class="keywordflow">if</span> track != {}:</div>
<div class="line"><span class="lineno">  571</span>        tmax = max(track, key=track.get)</div>
<div class="line"><span class="lineno">  572</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  573</span>        track = {-999: 0}</div>
<div class="line"><span class="lineno">  574</span>        tmax = -999</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span>    frac=0.0</div>
<div class="line"><span class="lineno">  577</span>    <span class="keywordflow">if</span> nh &gt; 0:</div>
<div class="line"><span class="lineno">  578</span>        frac = float(track[tmax]) / float(nh)</div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>    <span class="keywordflow">return</span> frac, tmax</div>
<div class="line"><span class="lineno">  581</span> </div>
<div class="line"><span class="lineno">  582</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a42f7b2c895655a7254fe343ffc57bbf4" name="a42f7b2c895655a7254fe343ffc57bbf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42f7b2c895655a7254fe343ffc57bbf4">&#9670;&#160;</a></span>get_n_hits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.get_n_hits </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>hits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00019">19</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   19</span><span class="keyword">def </span>get_n_hits(hits):</div>
<div class="line"><span class="lineno">   20</span>    <span class="keywordflow">return</span> len(hits)</div>
<div class="line"><span class="lineno">   21</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afd5476d8c8880a51e22ca2334c0c30e3" name="afd5476d8c8880a51e22ca2334c0c30e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd5476d8c8880a51e22ca2334c0c30e3">&#9670;&#160;</a></span>getPtruthFirst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.getPtruthFirst </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sTree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mcPartKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00793">793</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  793</span><span class="keyword">def </span>getPtruthFirst(sTree, mcPartKey):</div>
<div class="line"><span class="lineno">  794</span>    Ptruth,Ptruthx,Ptruthy,Ptruthz = -1.,-1.,-1.,-1.</div>
<div class="line"><span class="lineno">  795</span>    <span class="keywordflow">for</span> ahit <span class="keywordflow">in</span> sTree.strawtubesPoint:</div>
<div class="line"><span class="lineno">  796</span>        <span class="keywordflow">if</span> ahit.GetTrackID() == mcPartKey:</div>
<div class="line"><span class="lineno">  797</span>            Ptruthx,Ptruthy,Ptruthz = ahit.GetPx(),ahit.GetPy(),ahit.GetPz()</div>
<div class="line"><span class="lineno">  798</span>            Ptruth  = ROOT.TMath.Sqrt(Ptruthx**2+Ptruthy**2+Ptruthz**2)</div>
<div class="line"><span class="lineno">  799</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  800</span>    <span class="keywordflow">return</span> Ptruth,Ptruthx,Ptruthy,Ptruthz</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1c436ec5b0ea6b2c4c162ce393227dfe" name="a1c436ec5b0ea6b2c4c162ce393227dfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c436ec5b0ea6b2c4c162ce393227dfe">&#9670;&#160;</a></span>getReconstructibleTracks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.getReconstructibleTracks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iEvent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sTree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sGeo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ShipGeo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Estimates reconstructible tracks of an event.
Parameters
----------
iEvent : int
    Event id.
stree : root file
    Events in raw format.
fGeo : object
    Contains SHiP detector geometry.
ShipGeo : object
    Contains SHiP detector geometry.
Returns
-------
MCTrackIDs : array-like
    List of reconstructible track ids.
</pre> 
<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00585">585</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  585</span><span class="keyword">def </span>getReconstructibleTracks(iEvent, sTree, sGeo, ShipGeo):</div>
<div class="line"><span class="lineno">  586</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  587</span><span class="stringliteral">    Estimates reconstructible tracks of an event.</span></div>
<div class="line"><span class="lineno">  588</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  589</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  590</span><span class="stringliteral">    iEvent : int</span></div>
<div class="line"><span class="lineno">  591</span><span class="stringliteral">        Event id.</span></div>
<div class="line"><span class="lineno">  592</span><span class="stringliteral">    stree : root file</span></div>
<div class="line"><span class="lineno">  593</span><span class="stringliteral">        Events in raw format.</span></div>
<div class="line"><span class="lineno">  594</span><span class="stringliteral">    fGeo : object</span></div>
<div class="line"><span class="lineno">  595</span><span class="stringliteral">        Contains SHiP detector geometry.</span></div>
<div class="line"><span class="lineno">  596</span><span class="stringliteral">    ShipGeo : object</span></div>
<div class="line"><span class="lineno">  597</span><span class="stringliteral">        Contains SHiP detector geometry.</span></div>
<div class="line"><span class="lineno">  598</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  599</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  600</span><span class="stringliteral">    MCTrackIDs : array-like</span></div>
<div class="line"><span class="lineno">  601</span><span class="stringliteral">        List of reconstructible track ids.</span></div>
<div class="line"><span class="lineno">  602</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>    TStationz = ShipGeo.TrackStation1.z</div>
<div class="line"><span class="lineno">  605</span>    Zpos = TStationz - 3. /2. * ShipGeo.strawtubes.DeltazView - 1. / 2. * ShipGeo.strawtubes.DeltazLayer</div>
<div class="line"><span class="lineno">  606</span>    TStation1StartZ = Zpos - ShipGeo.strawtubes.OuterStrawDiameter / 2</div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>    Zpos = TStationz + 3. /2. * ShipGeo.strawtubes.DeltazView + 1. / 2. * ShipGeo.strawtubes.DeltazLayer</div>
<div class="line"><span class="lineno">  609</span>    TStation4EndZ = Zpos + ShipGeo.strawtubes.OuterStrawDiameter / 2</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span> </div>
<div class="line"><span class="lineno">  612</span>    PDG=ROOT.TDatabasePDG.Instance()</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>    <span class="comment">#returns a list of reconstructible tracks for this event</span></div>
<div class="line"><span class="lineno">  615</span>    <span class="comment">#call this routine once for each event before smearing</span></div>
<div class="line"><span class="lineno">  616</span>    MCTrackIDs=[]</div>
<div class="line"><span class="lineno">  617</span>    rc = sTree.GetEvent(iEvent)</div>
<div class="line"><span class="lineno">  618</span>    nMCTracks = sTree.MCTrack.GetEntriesFast()</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span> </div>
<div class="line"><span class="lineno">  621</span>    <span class="comment">#1. MCTrackIDs: list of tracks decaying after the last tstation and originating before the first</span></div>
<div class="line"><span class="lineno">  622</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> reversed(range(nMCTracks)):</div>
<div class="line"><span class="lineno">  623</span>        atrack = sTree.MCTrack.At(i)</div>
<div class="line"><span class="lineno">  624</span>        <span class="comment">#track endpoint after tstations?</span></div>
<div class="line"><span class="lineno">  625</span>        <span class="keywordflow">if</span> atrack.GetStartZ() &gt; TStation4EndZ :</div>
<div class="line"><span class="lineno">  626</span>            motherId = atrack.GetMotherId()</div>
<div class="line"><span class="lineno">  627</span>            <span class="keywordflow">if</span> motherId &gt; -1 :</div>
<div class="line"><span class="lineno">  628</span>                mothertrack = sTree.MCTrack.At(motherId)</div>
<div class="line"><span class="lineno">  629</span>                mothertrackZ = mothertrack.GetStartZ()</div>
<div class="line"><span class="lineno">  630</span>                <span class="comment">#this mother track is a HNL decay</span></div>
<div class="line"><span class="lineno">  631</span>                <span class="comment">#track starts inside the decay volume? (before 1 st tstation)</span></div>
<div class="line"><span class="lineno">  632</span>                <span class="keywordflow">if</span> mothertrackZ &lt; TStation1StartZ:</div>
<div class="line"><span class="lineno">  633</span>                    <span class="keywordflow">if</span> motherId <span class="keywordflow">not</span> <span class="keywordflow">in</span> MCTrackIDs:</div>
<div class="line"><span class="lineno">  634</span>                        MCTrackIDs.append(motherId)</div>
<div class="line"><span class="lineno">  635</span> </div>
<div class="line"><span class="lineno">  636</span>    <span class="keywordflow">if</span> len(MCTrackIDs)==0:</div>
<div class="line"><span class="lineno">  637</span>        <span class="keywordflow">return</span> MCTrackIDs</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span> </div>
<div class="line"><span class="lineno">  640</span> </div>
<div class="line"><span class="lineno">  641</span>    <span class="comment">#2. hitsinTimeDet: list of tracks with hits in TimeDet</span></div>
<div class="line"><span class="lineno">  642</span>    <span class="comment">#nVetoHits = sTree.vetoPoint.GetEntriesFast()</span></div>
<div class="line"><span class="lineno">  643</span>    <span class="comment">#hitsinTimeDet=[]</span></div>
<div class="line"><span class="lineno">  644</span>    <span class="comment">#for i in range(nVetoHits):</span></div>
<div class="line"><span class="lineno">  645</span>    <span class="comment">#    avetohit = sTree.vetoPoint.At(i)</span></div>
<div class="line"><span class="lineno">  646</span>    <span class="comment">#    #hit in TimeDet?</span></div>
<div class="line"><span class="lineno">  647</span>    <span class="comment">#    if sGeo.FindNode(avetohit.GetX(), avetohit.GetY(), avetohit.GetZ()).GetName() == &#39;TimeDet_1&#39;:</span></div>
<div class="line"><span class="lineno">  648</span>    <span class="comment">#        if avetohit.GetTrackID() not in hitsinTimeDet:</span></div>
<div class="line"><span class="lineno">  649</span>    <span class="comment">#            hitsinTimeDet.append(avetohit.GetTrackID())</span></div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>    <span class="comment">#3. Remove tracks from MCTrackIDs that are not in hitsinTimeDet</span></div>
<div class="line"><span class="lineno">  654</span>    <span class="comment">#itemstoremove = []</span></div>
<div class="line"><span class="lineno">  655</span>    <span class="comment">#for item in MCTrackIDs:</span></div>
<div class="line"><span class="lineno">  656</span>    <span class="comment">#    if item not in hitsinTimeDet:</span></div>
<div class="line"><span class="lineno">  657</span>    <span class="comment">#        itemstoremove.append(item)</span></div>
<div class="line"><span class="lineno">  658</span>    <span class="comment">#for item in itemstoremove:</span></div>
<div class="line"><span class="lineno">  659</span>    <span class="comment">#    MCTrackIDs.remove(item)</span></div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>    <span class="comment">#if len(MCTrackIDs)==0:</span></div>
<div class="line"><span class="lineno">  662</span>    <span class="comment">#    return MCTrackIDs</span></div>
<div class="line"><span class="lineno">  663</span> </div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  666</span>    <span class="comment">#4. Find straws that have multiple hits</span></div>
<div class="line"><span class="lineno">  667</span>    nHits = sTree.strawtubesPoint.GetEntriesFast()</div>
<div class="line"><span class="lineno">  668</span>    hitstraws = {}</div>
<div class="line"><span class="lineno">  669</span>    duplicatestrawhit = []</div>
<div class="line"><span class="lineno">  670</span> </div>
<div class="line"><span class="lineno">  671</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(nHits):</div>
<div class="line"><span class="lineno">  672</span>        ahit = sTree.strawtubesPoint[i]</div>
<div class="line"><span class="lineno">  673</span>        strawname = str(ahit.GetDetectorID())</div>
<div class="line"><span class="lineno">  674</span> </div>
<div class="line"><span class="lineno">  675</span>        <span class="keywordflow">if</span> strawname <span class="keywordflow">in</span> hitstraws:</div>
<div class="line"><span class="lineno">  676</span>            <span class="comment">#straw was already hit</span></div>
<div class="line"><span class="lineno">  677</span>            <span class="keywordflow">if</span> ahit.GetX() &gt; hitstraws[strawname][1]:</div>
<div class="line"><span class="lineno">  678</span>                <span class="comment">#this hit has higher x, discard it</span></div>
<div class="line"><span class="lineno">  679</span>                duplicatestrawhit.append(i)</div>
<div class="line"><span class="lineno">  680</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  681</span>                <span class="comment">#del hitstraws[strawname]</span></div>
<div class="line"><span class="lineno">  682</span>                duplicatestrawhit.append(hitstraws[strawname][0])</div>
<div class="line"><span class="lineno">  683</span>                hitstraws[strawname] = [i,ahit.GetX()]</div>
<div class="line"><span class="lineno">  684</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  685</span>            hitstraws[strawname] = [i,ahit.GetX()]</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span> </div>
<div class="line"><span class="lineno">  688</span> </div>
<div class="line"><span class="lineno">  689</span>    <span class="comment">#5. Split hits up by station and outside stations</span></div>
<div class="line"><span class="lineno">  690</span>    hits1={}</div>
<div class="line"><span class="lineno">  691</span>    hits2={}</div>
<div class="line"><span class="lineno">  692</span>    hits3={}</div>
<div class="line"><span class="lineno">  693</span>    hits4={}</div>
<div class="line"><span class="lineno">  694</span>    trackoutsidestations=[]</div>
<div class="line"><span class="lineno">  695</span> </div>
<div class="line"><span class="lineno">  696</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(nHits):</div>
<div class="line"><span class="lineno">  697</span> </div>
<div class="line"><span class="lineno">  698</span>        <span class="keywordflow">if</span> i <span class="keywordflow">in</span>  duplicatestrawhit:</div>
<div class="line"><span class="lineno">  699</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  700</span> </div>
<div class="line"><span class="lineno">  701</span>        ahit = sTree.strawtubesPoint[i]</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>        <span class="comment"># is hit inside acceptance? if not mark the track as bad</span></div>
<div class="line"><span class="lineno">  704</span>        <span class="keywordflow">if</span> (((ahit.GetX()/245.)**2 + (ahit.GetY()/495.)**2) &gt;= 1.):</div>
<div class="line"><span class="lineno">  705</span>            <span class="keywordflow">if</span> ahit.GetTrackID() <span class="keywordflow">not</span> <span class="keywordflow">in</span> trackoutsidestations:</div>
<div class="line"><span class="lineno">  706</span>                trackoutsidestations.append(ahit.GetTrackID())</div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span>        <span class="keywordflow">if</span> ahit.GetTrackID() <span class="keywordflow">not</span> <span class="keywordflow">in</span> MCTrackIDs:</div>
<div class="line"><span class="lineno">  709</span>            <span class="comment">#hit on not reconstructible track</span></div>
<div class="line"><span class="lineno">  710</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  711</span> </div>
<div class="line"><span class="lineno">  712</span>        <span class="comment">#group hits per tracking station, key = trackid</span></div>
<div class="line"><span class="lineno">  713</span>        <span class="keywordflow">if</span> str(ahit.GetDetectorID())[:1]==<span class="stringliteral">&quot;1&quot;</span> :</div>
<div class="line"><span class="lineno">  714</span>            <span class="keywordflow">if</span> ahit.GetTrackID() <span class="keywordflow">in</span> hits1:</div>
<div class="line"><span class="lineno">  715</span>                hits1[ahit.GetTrackID()] = [hits1[ahit.GetTrackID()][0], i]</div>
<div class="line"><span class="lineno">  716</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  717</span>                hits1[ahit.GetTrackID()] = [i]</div>
<div class="line"><span class="lineno">  718</span> </div>
<div class="line"><span class="lineno">  719</span>        <span class="keywordflow">if</span> str(ahit.GetDetectorID())[:1]==<span class="stringliteral">&quot;2&quot;</span> :</div>
<div class="line"><span class="lineno">  720</span>            <span class="keywordflow">if</span> ahit.GetTrackID() <span class="keywordflow">in</span> hits2:</div>
<div class="line"><span class="lineno">  721</span>                hits2[ahit.GetTrackID()] = [hits2[ahit.GetTrackID()][0], i]</div>
<div class="line"><span class="lineno">  722</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  723</span>                hits2[ahit.GetTrackID()] = [i]</div>
<div class="line"><span class="lineno">  724</span> </div>
<div class="line"><span class="lineno">  725</span>        <span class="keywordflow">if</span> str(ahit.GetDetectorID())[:1]==<span class="stringliteral">&quot;3&quot;</span> :</div>
<div class="line"><span class="lineno">  726</span>            <span class="keywordflow">if</span> ahit.GetTrackID() <span class="keywordflow">in</span> hits3:</div>
<div class="line"><span class="lineno">  727</span>                hits3[ahit.GetTrackID()] = [hits3[ahit.GetTrackID()][0], i]</div>
<div class="line"><span class="lineno">  728</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  729</span>                hits3[ahit.GetTrackID()] = [i]</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span>        <span class="keywordflow">if</span> str(ahit.GetDetectorID())[:1]==<span class="stringliteral">&quot;4&quot;</span> :</div>
<div class="line"><span class="lineno">  732</span>            <span class="keywordflow">if</span> ahit.GetTrackID() <span class="keywordflow">in</span> hits4:</div>
<div class="line"><span class="lineno">  733</span>                hits4[ahit.GetTrackID()] = [hits4[ahit.GetTrackID()][0], i]</div>
<div class="line"><span class="lineno">  734</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  735</span>                hits4[ahit.GetTrackID()] = [i]</div>
<div class="line"><span class="lineno">  736</span> </div>
<div class="line"><span class="lineno">  737</span> </div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>    <span class="comment">#6. Make list of tracks with hits in in station 1,2,3 &amp; 4</span></div>
<div class="line"><span class="lineno">  740</span>    tracks_with_hits_in_all_stations = []</div>
<div class="line"><span class="lineno">  741</span> </div>
<div class="line"><span class="lineno">  742</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> hits1.keys():</div>
<div class="line"><span class="lineno">  743</span>        <span class="keywordflow">if</span> (key <span class="keywordflow">in</span> hits2 <span class="keywordflow">and</span> key <span class="keywordflow">in</span> hits3 ) <span class="keywordflow">and</span> key <span class="keywordflow">in</span> hits4:</div>
<div class="line"><span class="lineno">  744</span>            <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> tracks_with_hits_in_all_stations <span class="keywordflow">and</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> trackoutsidestations:</div>
<div class="line"><span class="lineno">  745</span>                tracks_with_hits_in_all_stations.append(key)</div>
<div class="line"><span class="lineno">  746</span> </div>
<div class="line"><span class="lineno">  747</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> hits2.keys():</div>
<div class="line"><span class="lineno">  748</span>        <span class="keywordflow">if</span> (key <span class="keywordflow">in</span> hits1 <span class="keywordflow">and</span> key <span class="keywordflow">in</span> hits3 ) <span class="keywordflow">and</span> key <span class="keywordflow">in</span> hits4:</div>
<div class="line"><span class="lineno">  749</span>            <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> tracks_with_hits_in_all_stations <span class="keywordflow">and</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> trackoutsidestations:</div>
<div class="line"><span class="lineno">  750</span>                tracks_with_hits_in_all_stations.append(key)</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> hits3.keys():</div>
<div class="line"><span class="lineno">  753</span>        <span class="keywordflow">if</span> ( key <span class="keywordflow">in</span> hits2 <span class="keywordflow">and</span> key <span class="keywordflow">in</span> hits1 ) <span class="keywordflow">and</span> key <span class="keywordflow">in</span> hits4:</div>
<div class="line"><span class="lineno">  754</span>            <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> tracks_with_hits_in_all_stations <span class="keywordflow">and</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> trackoutsidestations:</div>
<div class="line"><span class="lineno">  755</span>                tracks_with_hits_in_all_stations.append(key)</div>
<div class="line"><span class="lineno">  756</span> </div>
<div class="line"><span class="lineno">  757</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> hits4.keys():</div>
<div class="line"><span class="lineno">  758</span>        <span class="keywordflow">if</span> (key <span class="keywordflow">in</span> hits2 <span class="keywordflow">and</span> key <span class="keywordflow">in</span> hits3) <span class="keywordflow">and</span> key <span class="keywordflow">in</span> hits1:</div>
<div class="line"><span class="lineno">  759</span>            <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> tracks_with_hits_in_all_stations <span class="keywordflow">and</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> trackoutsidestations:</div>
<div class="line"><span class="lineno">  760</span>                tracks_with_hits_in_all_stations.append(key)</div>
<div class="line"><span class="lineno">  761</span> </div>
<div class="line"><span class="lineno">  762</span> </div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>    <span class="comment">#7. Remove tracks from MCTrackIDs with hits outside acceptance or doesn&#39;t have hits in all stations</span></div>
<div class="line"><span class="lineno">  765</span>    itemstoremove = []</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>    <span class="keywordflow">for</span> item <span class="keywordflow">in</span> MCTrackIDs:</div>
<div class="line"><span class="lineno">  768</span>        <span class="keywordflow">if</span> item <span class="keywordflow">not</span> <span class="keywordflow">in</span> tracks_with_hits_in_all_stations:</div>
<div class="line"><span class="lineno">  769</span>            itemstoremove.append(item)</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>    <span class="keywordflow">for</span> item <span class="keywordflow">in</span> itemstoremove:</div>
<div class="line"><span class="lineno">  772</span>        MCTrackIDs.remove(item)</div>
<div class="line"><span class="lineno">  773</span> </div>
<div class="line"><span class="lineno">  774</span>    <span class="keywordflow">if</span> len(MCTrackIDs)==0:</div>
<div class="line"><span class="lineno">  775</span>        <span class="keywordflow">return</span> MCTrackIDs</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>    itemstoremove = []</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>    <span class="keywordflow">for</span> item <span class="keywordflow">in</span> MCTrackIDs:</div>
<div class="line"><span class="lineno">  780</span>        atrack = sTree.MCTrack.At(item)</div>
<div class="line"><span class="lineno">  781</span>        motherId=atrack.GetMotherId()</div>
<div class="line"><span class="lineno">  782</span>        <span class="keywordflow">if</span> motherId != 2: <span class="comment">#!!!!</span></div>
<div class="line"><span class="lineno">  783</span>            itemstoremove.append(item)</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>    <span class="keywordflow">for</span> item <span class="keywordflow">in</span> itemstoremove:</div>
<div class="line"><span class="lineno">  786</span>        MCTrackIDs.remove(item)</div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span> </div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>    <span class="keywordflow">return</span> MCTrackIDs</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f8170056fea500eadaec343a3b75173" name="a6f8170056fea500eadaec343a3b75173"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f8170056fea500eadaec343a3b75173">&#9670;&#160;</a></span>init_book_hist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.init_book_hist </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Creates empty plots.
Returns
-------
h : dict
    Dictionary of plots.
</pre> 
<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00828">828</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  828</span><span class="keyword">def </span>init_book_hist():</div>
<div class="line"><span class="lineno">  829</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  830</span><span class="stringliteral">    Creates empty plots.</span></div>
<div class="line"><span class="lineno">  831</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  832</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  833</span><span class="stringliteral">    h : dict</span></div>
<div class="line"><span class="lineno">  834</span><span class="stringliteral">        Dictionary of plots.</span></div>
<div class="line"><span class="lineno">  835</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>    h={} <span class="comment">#dictionary of histograms</span></div>
<div class="line"><span class="lineno">  838</span> </div>
<div class="line"><span class="lineno">  839</span>    ut.bookHist(h,<span class="stringliteral">&#39;TracksPassed&#39;</span>,<span class="stringliteral">&#39;Tracks passing the pattern recognition&#39;</span>, 8, -0.5, 7.5)</div>
<div class="line"><span class="lineno">  840</span>    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].GetXaxis().SetBinLabel(1,<span class="stringliteral">&quot;Reconstructible tracks&quot;</span>)</div>
<div class="line"><span class="lineno">  841</span>    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].GetXaxis().SetBinLabel(2,<span class="stringliteral">&quot;Y view station 1&amp;2&quot;</span>)</div>
<div class="line"><span class="lineno">  842</span>    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].GetXaxis().SetBinLabel(3,<span class="stringliteral">&quot;Stereo station 1&amp;2&quot;</span>)</div>
<div class="line"><span class="lineno">  843</span>    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].GetXaxis().SetBinLabel(4,<span class="stringliteral">&quot;station 1&amp;2&quot;</span>)</div>
<div class="line"><span class="lineno">  844</span>    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].GetXaxis().SetBinLabel(5,<span class="stringliteral">&quot;Y view station 3&amp;4&quot;</span>)</div>
<div class="line"><span class="lineno">  845</span>    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].GetXaxis().SetBinLabel(6,<span class="stringliteral">&quot;Stereo station 3&amp;4&quot;</span>)</div>
<div class="line"><span class="lineno">  846</span>    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].GetXaxis().SetBinLabel(7,<span class="stringliteral">&quot;station 3&amp;4&quot;</span>)</div>
<div class="line"><span class="lineno">  847</span>    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].GetXaxis().SetBinLabel(8,<span class="stringliteral">&quot;Combined stations 1&amp;2/3&amp;4&quot;</span>)</div>
<div class="line"><span class="lineno">  848</span> </div>
<div class="line"><span class="lineno">  849</span>    ut.bookHist(h,<span class="stringliteral">&#39;TracksPassedU&#39;</span>,<span class="stringliteral">&#39;Tracks passing the pattern recognition. No clones.&#39;</span>, 8, -0.5, 7.5)</div>
<div class="line"><span class="lineno">  850</span>    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].GetXaxis().SetBinLabel(1,<span class="stringliteral">&quot;Reconstructible tracks&quot;</span>)</div>
<div class="line"><span class="lineno">  851</span>    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].GetXaxis().SetBinLabel(2,<span class="stringliteral">&quot;Y view station 1&amp;2&quot;</span>)</div>
<div class="line"><span class="lineno">  852</span>    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].GetXaxis().SetBinLabel(3,<span class="stringliteral">&quot;Stereo station 1&amp;2&quot;</span>)</div>
<div class="line"><span class="lineno">  853</span>    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].GetXaxis().SetBinLabel(4,<span class="stringliteral">&quot;station 1&amp;2&quot;</span>)</div>
<div class="line"><span class="lineno">  854</span>    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].GetXaxis().SetBinLabel(5,<span class="stringliteral">&quot;Y view station 3&amp;4&quot;</span>)</div>
<div class="line"><span class="lineno">  855</span>    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].GetXaxis().SetBinLabel(6,<span class="stringliteral">&quot;Stereo station 3&amp;4&quot;</span>)</div>
<div class="line"><span class="lineno">  856</span>    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].GetXaxis().SetBinLabel(7,<span class="stringliteral">&quot;station 3&amp;4&quot;</span>)</div>
<div class="line"><span class="lineno">  857</span>    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].GetXaxis().SetBinLabel(8,<span class="stringliteral">&quot;Combined stations 1&amp;2/3&amp;4&quot;</span>)</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>    ut.bookProf(h, <span class="stringliteral">&#39;TracksPassed_p&#39;</span>, <span class="stringliteral">&#39;Tracks passing the pattern recognition from momentum&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  860</span>    h[<span class="stringliteral">&#39;TracksPassed_p&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  861</span>    h[<span class="stringliteral">&#39;TracksPassed_p&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;N&#39;</span>)</div>
<div class="line"><span class="lineno">  862</span> </div>
<div class="line"><span class="lineno">  863</span>    ut.bookHist(h,<span class="stringliteral">&#39;ptrue-p/ptrue&#39;</span>,<span class="stringliteral">&#39;(p - p-true)/p&#39;</span>,200,-0.25,0.25)</div>
<div class="line"><span class="lineno">  864</span>    ut.bookHist(h,<span class="stringliteral">&#39;pttrue-pt/pttrue&#39;</span>,<span class="stringliteral">&#39;(pt - pt-true)/pt&#39;</span>,200,-0.25,0.25)</div>
<div class="line"><span class="lineno">  865</span>    ut.bookHist(h,<span class="stringliteral">&#39;pxtrue-px/pxtrue&#39;</span>,<span class="stringliteral">&#39;(px - px-true)/px&#39;</span>,200,-0.25,0.25)</div>
<div class="line"><span class="lineno">  866</span>    ut.bookHist(h,<span class="stringliteral">&#39;pytrue-py/pytrue&#39;</span>,<span class="stringliteral">&#39;(py - py-true)/py&#39;</span>,200,-0.25,0.25)</div>
<div class="line"><span class="lineno">  867</span>    ut.bookHist(h,<span class="stringliteral">&#39;pztrue-pz/pztrue&#39;</span>,<span class="stringliteral">&#39;(pz - pz-true)/pz&#39;</span>,200,-0.25,0.25)</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span> </div>
<div class="line"><span class="lineno">  870</span>    ut.bookHist(h,<span class="stringliteral">&#39;n_hits_reco&#39;</span>,<span class="stringliteral">&#39;Number of recognized hits per track, total&#39;</span>,64,0.,64.01)</div>
<div class="line"><span class="lineno">  871</span>    ut.bookHist(h,<span class="stringliteral">&#39;n_hits_reco_12&#39;</span>,<span class="stringliteral">&#39;Number of recognized hits per track, station 1&amp;2&#39;</span>,32,0.,32.01)</div>
<div class="line"><span class="lineno">  872</span>    ut.bookHist(h,<span class="stringliteral">&#39;n_hits_reco_y12&#39;</span>,<span class="stringliteral">&#39;Number of recognized hits per track, Y view station 1&amp;2&#39;</span>,32,0.,32.01)</div>
<div class="line"><span class="lineno">  873</span>    ut.bookHist(h,<span class="stringliteral">&#39;n_hits_reco_stereo12&#39;</span>,<span class="stringliteral">&#39;Number of recognized hits per track, Stereo view station 1&amp;2&#39;</span>,32,0.,32.01)</div>
<div class="line"><span class="lineno">  874</span>    ut.bookHist(h,<span class="stringliteral">&#39;n_hits_reco_34&#39;</span>,<span class="stringliteral">&#39;Number of recognized hits per track, station 3&amp;4&#39;</span>,32,0.,32.01)</div>
<div class="line"><span class="lineno">  875</span>    ut.bookHist(h,<span class="stringliteral">&#39;n_hits_reco_y34&#39;</span>,<span class="stringliteral">&#39;Number of recognized hits per track, Y view station 3&amp;4&#39;</span>,32,0.,32.01)</div>
<div class="line"><span class="lineno">  876</span>    ut.bookHist(h,<span class="stringliteral">&#39;n_hits_reco_stereo34&#39;</span>,<span class="stringliteral">&#39;Number of recognized hits per track, Stereo view station 3&amp;4&#39;</span>,32,0.,32.01)</div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span>    <span class="comment"># Momentum dependences</span></div>
<div class="line"><span class="lineno">  879</span>    ut.bookProf(h, <span class="stringliteral">&#39;n_hits_total&#39;</span>, <span class="stringliteral">&#39;Number of recognized hits per track, total&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  880</span>    h[<span class="stringliteral">&#39;n_hits_total&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  881</span>    h[<span class="stringliteral">&#39;n_hits_total&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;N&#39;</span>)</div>
<div class="line"><span class="lineno">  882</span> </div>
<div class="line"><span class="lineno">  883</span>    ut.bookProf(h, <span class="stringliteral">&#39;n_hits_y12&#39;</span>, <span class="stringliteral">&#39;Number of recognized hits per track, Y view station 1&amp;2&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  884</span>    h[<span class="stringliteral">&#39;n_hits_y12&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  885</span>    h[<span class="stringliteral">&#39;n_hits_y12&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;N&#39;</span>)</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>    ut.bookProf(h, <span class="stringliteral">&#39;n_hits_stereo12&#39;</span>, <span class="stringliteral">&#39;Number of recognized hits per track, Stereo view station 1&amp;2&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  888</span>    h[<span class="stringliteral">&#39;n_hits_stereo12&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  889</span>    h[<span class="stringliteral">&#39;n_hits_stereo12&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;N&#39;</span>)</div>
<div class="line"><span class="lineno">  890</span> </div>
<div class="line"><span class="lineno">  891</span>    ut.bookProf(h, <span class="stringliteral">&#39;n_hits_12&#39;</span>, <span class="stringliteral">&#39;Number of recognized hits per track, station 1&amp;2&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  892</span>    h[<span class="stringliteral">&#39;n_hits_12&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  893</span>    h[<span class="stringliteral">&#39;n_hits_12&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;N&#39;</span>)</div>
<div class="line"><span class="lineno">  894</span> </div>
<div class="line"><span class="lineno">  895</span>    ut.bookProf(h, <span class="stringliteral">&#39;n_hits_y34&#39;</span>, <span class="stringliteral">&#39;Number of recognized hits per track, Y view station 3&amp;4&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  896</span>    h[<span class="stringliteral">&#39;n_hits_y34&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  897</span>    h[<span class="stringliteral">&#39;n_hits_y34&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;N&#39;</span>)</div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>    ut.bookProf(h, <span class="stringliteral">&#39;n_hits_stereo34&#39;</span>, <span class="stringliteral">&#39;Number of recognized hits per track, Stereo view station 3&amp;4&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  900</span>    h[<span class="stringliteral">&#39;n_hits_stereo34&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  901</span>    h[<span class="stringliteral">&#39;n_hits_stereo34&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;N&#39;</span>)</div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span>    ut.bookProf(h, <span class="stringliteral">&#39;n_hits_34&#39;</span>, <span class="stringliteral">&#39;Number of recognized hits per track, station 3&amp;4&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  904</span>    h[<span class="stringliteral">&#39;n_hits_34&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  905</span>    h[<span class="stringliteral">&#39;n_hits_34&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;N&#39;</span>)</div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>    ut.bookProf(h,<span class="stringliteral">&#39;perr&#39;</span>,<span class="stringliteral">&#39;(p - p-true)/p&#39;</span>,30, 0, 150)</div>
<div class="line"><span class="lineno">  908</span>    h[<span class="stringliteral">&#39;perr&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  909</span>    h[<span class="stringliteral">&#39;perr&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;(p - p-true)/p&#39;</span>)</div>
<div class="line"><span class="lineno">  910</span> </div>
<div class="line"><span class="lineno">  911</span>    ut.bookProf(h,<span class="stringliteral">&#39;perr_direction&#39;</span>,<span class="stringliteral">&#39;(p - p-true)/p from track direction in YZ plane&#39;</span>,20, 0, 10.01)</div>
<div class="line"><span class="lineno">  912</span>    h[<span class="stringliteral">&#39;perr_direction&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Degree&#39;</span>)</div>
<div class="line"><span class="lineno">  913</span>    h[<span class="stringliteral">&#39;perr_direction&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;(p - p-true)/p&#39;</span>)</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span>    ut.bookProf(h, <span class="stringliteral">&#39;frac_total&#39;</span>, <span class="stringliteral">&#39;Fraction of hits the same as MC hits, total&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  917</span>    h[<span class="stringliteral">&#39;frac_total&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  918</span>    h[<span class="stringliteral">&#39;frac_total&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;Fraction&#39;</span>)</div>
<div class="line"><span class="lineno">  919</span> </div>
<div class="line"><span class="lineno">  920</span>    ut.bookProf(h, <span class="stringliteral">&#39;frac_y12&#39;</span>, <span class="stringliteral">&#39;Fraction of hits the same as MC hits, Y view station 1&amp;2&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  921</span>    h[<span class="stringliteral">&#39;frac_y12&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  922</span>    h[<span class="stringliteral">&#39;frac_y12&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;Fraction&#39;</span>)</div>
<div class="line"><span class="lineno">  923</span> </div>
<div class="line"><span class="lineno">  924</span>    ut.bookProf(h, <span class="stringliteral">&#39;frac_stereo12&#39;</span>, <span class="stringliteral">&#39;Fraction of hits the same as MC hits, Stereo view station 1&amp;2&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  925</span>    h[<span class="stringliteral">&#39;frac_stereo12&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  926</span>    h[<span class="stringliteral">&#39;frac_stereo12&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;Fraction&#39;</span>)</div>
<div class="line"><span class="lineno">  927</span> </div>
<div class="line"><span class="lineno">  928</span>    ut.bookProf(h, <span class="stringliteral">&#39;frac_12&#39;</span>, <span class="stringliteral">&#39;Fraction of hits the same as MC hits, station 1&amp;2&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  929</span>    h[<span class="stringliteral">&#39;frac_12&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  930</span>    h[<span class="stringliteral">&#39;frac_12&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;Fraction&#39;</span>)</div>
<div class="line"><span class="lineno">  931</span> </div>
<div class="line"><span class="lineno">  932</span>    ut.bookProf(h, <span class="stringliteral">&#39;frac_y34&#39;</span>, <span class="stringliteral">&#39;Fraction of hits the same as MC hits, Y view station 3&amp;4&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  933</span>    h[<span class="stringliteral">&#39;frac_y34&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  934</span>    h[<span class="stringliteral">&#39;frac_y34&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;Fraction&#39;</span>)</div>
<div class="line"><span class="lineno">  935</span> </div>
<div class="line"><span class="lineno">  936</span>    ut.bookProf(h, <span class="stringliteral">&#39;frac_stereo34&#39;</span>, <span class="stringliteral">&#39;Fraction of hits the same as MC hits, Stereo view station 3&amp;4&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  937</span>    h[<span class="stringliteral">&#39;frac_stereo34&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  938</span>    h[<span class="stringliteral">&#39;frac_stereo34&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;Fraction&#39;</span>)</div>
<div class="line"><span class="lineno">  939</span> </div>
<div class="line"><span class="lineno">  940</span>    ut.bookProf(h, <span class="stringliteral">&#39;frac_34&#39;</span>, <span class="stringliteral">&#39;Fraction of hits the same as MC hits, station 3&amp;4&#39;</span>, 30, 0, 150)</div>
<div class="line"><span class="lineno">  941</span>    h[<span class="stringliteral">&#39;frac_34&#39;</span>].GetXaxis().SetTitle(<span class="stringliteral">&#39;Momentum&#39;</span>)</div>
<div class="line"><span class="lineno">  942</span>    h[<span class="stringliteral">&#39;frac_34&#39;</span>].GetYaxis().SetTitle(<span class="stringliteral">&#39;Fraction&#39;</span>)</div>
<div class="line"><span class="lineno">  943</span> </div>
<div class="line"><span class="lineno">  944</span>    ut.bookHist(h,<span class="stringliteral">&#39;frac_y12_dist&#39;</span>,<span class="stringliteral">&#39;Fraction of hits the same as MC hits, Y view station 1&amp;2&#39;</span>,50,0.5,1.001)</div>
<div class="line"><span class="lineno">  945</span>    ut.bookHist(h,<span class="stringliteral">&#39;frac_stereo12_dist&#39;</span>,<span class="stringliteral">&#39;Fraction of hits the same as MC hits, Stereo view station 1&amp;2&#39;</span>,50,0.5,1.001)</div>
<div class="line"><span class="lineno">  946</span>    ut.bookHist(h,<span class="stringliteral">&#39;frac_12_dist&#39;</span>,<span class="stringliteral">&#39;Fraction of hits the same as MC hits, station 1&amp;2&#39;</span>,50,0.5,1.001)</div>
<div class="line"><span class="lineno">  947</span>    ut.bookHist(h,<span class="stringliteral">&#39;frac_y34_dist&#39;</span>,<span class="stringliteral">&#39;Fraction of hits the same as MC hits, Y view station 3&amp;4&#39;</span>,50,0.5,1.001)</div>
<div class="line"><span class="lineno">  948</span>    ut.bookHist(h,<span class="stringliteral">&#39;frac_stereo34_dist&#39;</span>,<span class="stringliteral">&#39;Fraction of hits the same as MC hits, Stereo view station 3&amp;4&#39;</span>,50,0.5,1.001)</div>
<div class="line"><span class="lineno">  949</span>    ut.bookHist(h,<span class="stringliteral">&#39;frac_34_dist&#39;</span>,<span class="stringliteral">&#39;Fraction of hits the same as MC hits, station 3&amp;4&#39;</span>,50,0.5,1.001)</div>
<div class="line"><span class="lineno">  950</span>    ut.bookHist(h,<span class="stringliteral">&#39;frac_total_dist&#39;</span>,<span class="stringliteral">&#39;Fraction of hits the same as MC hits, total&#39;</span>,50,0.5,1.001)</div>
<div class="line"><span class="lineno">  951</span> </div>
<div class="line"><span class="lineno">  952</span> </div>
<div class="line"><span class="lineno">  953</span>    ut.bookHist(h,<span class="stringliteral">&#39;Reco_tracks&#39;</span>,<span class="stringliteral">&#39;Number of recognized tracks, clones and ghosts for reconstructible tracks.&#39;</span>, 5, -0.5, 4.5)</div>
<div class="line"><span class="lineno">  954</span>    h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].GetXaxis().SetBinLabel(1,<span class="stringliteral">&quot;N total&quot;</span>)</div>
<div class="line"><span class="lineno">  955</span>    h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].GetXaxis().SetBinLabel(2,<span class="stringliteral">&quot;N recognized tracks&quot;</span>)</div>
<div class="line"><span class="lineno">  956</span>    h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].GetXaxis().SetBinLabel(3,<span class="stringliteral">&quot;N clones&quot;</span>)</div>
<div class="line"><span class="lineno">  957</span>    h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].GetXaxis().SetBinLabel(4,<span class="stringliteral">&quot;N ghosts&quot;</span>)</div>
<div class="line"><span class="lineno">  958</span>    h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].GetXaxis().SetBinLabel(5,<span class="stringliteral">&quot;N others&quot;</span>)</div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span> </div>
<div class="line"><span class="lineno">  961</span>    <span class="comment"># Fitted values</span></div>
<div class="line"><span class="lineno">  962</span>    ut.bookHist(h,<span class="stringliteral">&#39;chi2fittedtracks&#39;</span>,<span class="stringliteral">&#39;Chi^2 per NDOF for fitted tracks&#39;</span>,210,-0.05,20.05)</div>
<div class="line"><span class="lineno">  963</span>    ut.bookHist(h,<span class="stringliteral">&#39;pvalfittedtracks&#39;</span>,<span class="stringliteral">&#39;pval for fitted tracks&#39;</span>,110,-0.05,1.05)</div>
<div class="line"><span class="lineno">  964</span>    ut.bookHist(h,<span class="stringliteral">&#39;momentumfittedtracks&#39;</span>,<span class="stringliteral">&#39;momentum for fitted tracks&#39;</span>,251,-0.05,250.05)</div>
<div class="line"><span class="lineno">  965</span>    ut.bookHist(h,<span class="stringliteral">&#39;xdirectionfittedtracks&#39;</span>,<span class="stringliteral">&#39;x-direction for fitted tracks&#39;</span>,91,-0.5,90.5)</div>
<div class="line"><span class="lineno">  966</span>    ut.bookHist(h,<span class="stringliteral">&#39;ydirectionfittedtracks&#39;</span>,<span class="stringliteral">&#39;y-direction for fitted tracks&#39;</span>,91,-0.5,90.5)</div>
<div class="line"><span class="lineno">  967</span>    ut.bookHist(h,<span class="stringliteral">&#39;zdirectionfittedtracks&#39;</span>,<span class="stringliteral">&#39;z-direction for fitted tracks&#39;</span>,91,-0.5,90.5)</div>
<div class="line"><span class="lineno">  968</span>    ut.bookHist(h,<span class="stringliteral">&#39;massfittedtracks&#39;</span>,<span class="stringliteral">&#39;mass fitted tracks&#39;</span>,210,-0.005,0.205)</div>
<div class="line"><span class="lineno">  969</span>    ut.bookHist(h,<span class="stringliteral">&#39;pvspfitted&#39;</span>,<span class="stringliteral">&#39;p-patrec vs p-fitted&#39;</span>,401,-200.5,200.5,401,-200.5,200.5)</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span> </div>
<div class="line"><span class="lineno">  972</span>    ut.bookHist(h,<span class="stringliteral">&#39;abs(x - x-true)&#39;</span>,<span class="stringliteral">&#39;Hits abs(x - x-true)&#39;</span>,260,-0.05,5.05)</div>
<div class="line"><span class="lineno">  973</span>    ut.bookHist(h,<span class="stringliteral">&#39;abs(y - y-true)&#39;</span>,<span class="stringliteral">&#39;Hits abs(y - y-true)&#39;</span>,260,-0.05,5.05)</div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>    ut.bookHist(h,<span class="stringliteral">&#39;rmse_x&#39;</span>,<span class="stringliteral">&#39;Hits x fit rmse&#39;</span>,260,-0.05,5.05)</div>
<div class="line"><span class="lineno">  976</span>    ut.bookHist(h,<span class="stringliteral">&#39;rmse_y&#39;</span>,<span class="stringliteral">&#39;Hits y fit rmse&#39;</span>,260,-0.05,5.05)</div>
<div class="line"><span class="lineno">  977</span> </div>
<div class="line"><span class="lineno">  978</span> </div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>    <span class="keywordflow">return</span> h</div>
<div class="line"><span class="lineno">  981</span> </div>
<div class="line"><span class="lineno">  982</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a41edd2c3b1e3c557bed66f1a7bc69a34" name="a41edd2c3b1e3c557bed66f1a7bc69a34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41edd2c3b1e3c557bed66f1a7bc69a34">&#9670;&#160;</a></span>run_track_pattern_recognition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.run_track_pattern_recognition </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>geo_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Runs all steps of track pattern recognition.
Parameters
----------
input_file : string
    Path to an input .root file with events.
geo_file : string
    Path to a file with SHiP geometry.
output_file : string
    Path to an output .root file with quality plots.
method : string
    Name of a track pattern recognition method.
</pre> 
<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00025">25</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   25</span><span class="keyword">def </span>run_track_pattern_recognition(input_file, geo_file, output_file, method):</div>
<div class="line"><span class="lineno">   26</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">    Runs all steps of track pattern recognition.</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   29</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   30</span><span class="stringliteral">    input_file : string</span></div>
<div class="line"><span class="lineno">   31</span><span class="stringliteral">        Path to an input .root file with events.</span></div>
<div class="line"><span class="lineno">   32</span><span class="stringliteral">    geo_file : string</span></div>
<div class="line"><span class="lineno">   33</span><span class="stringliteral">        Path to a file with SHiP geometry.</span></div>
<div class="line"><span class="lineno">   34</span><span class="stringliteral">    output_file : string</span></div>
<div class="line"><span class="lineno">   35</span><span class="stringliteral">        Path to an output .root file with quality plots.</span></div>
<div class="line"><span class="lineno">   36</span><span class="stringliteral">    method : string</span></div>
<div class="line"><span class="lineno">   37</span><span class="stringliteral">        Name of a track pattern recognition method.</span></div>
<div class="line"><span class="lineno">   38</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>    </div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>    <span class="comment"># Check geo file</span></div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   45</span>        fgeo = ROOT.TFile(geo_file)</div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">   47</span>        print(<span class="stringliteral">&quot;An error with opening the ship geo file.&quot;</span>)</div>
<div class="line"><span class="lineno">   48</span>        <span class="keywordflow">raise</span></div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>    sGeo = fgeo.Get(<span class="stringliteral">&quot;FAIRGeom&quot;</span>)</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>    <span class="comment"># Prepare ShipGeo dictionary</span></div>
<div class="line"><span class="lineno">   53</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> fgeo.FindKey(<span class="stringliteral">&#39;ShipGeo&#39;</span>):</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>        <span class="keywordflow">if</span> sGeo.GetVolume(<span class="stringliteral">&#39;EcalModule3&#39;</span>) :</div>
<div class="line"><span class="lineno">   56</span>            ecalGeoFile = <span class="stringliteral">&quot;ecal_ellipse6x12m2.geo&quot;</span></div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   58</span>            ecalGeoFile = <span class="stringliteral">&quot;ecal_ellipse5x10m2.geo&quot;</span></div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>        <span class="keywordflow">if</span> dy:</div>
<div class="line"><span class="lineno">   61</span>            ShipGeo = ConfigRegistry.loadpy(<span class="stringliteral">&quot;$FAIRSHIP/geometry/geometry_config.py&quot;</span>, Yheight = dy, EcalGeoFile = ecalGeoFile)</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   63</span>            ShipGeo = ConfigRegistry.loadpy(<span class="stringliteral">&quot;$FAIRSHIP/geometry/geometry_config.py&quot;</span>, EcalGeoFile = ecalGeoFile)</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   66</span>        upkl    = Unpickler(fgeo)</div>
<div class="line"><span class="lineno">   67</span>        ShipGeo = upkl.load(<span class="stringliteral">&#39;ShipGeo&#39;</span>)</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>    <span class="comment"># Globals</span></div>
<div class="line"><span class="lineno">   70</span>    global_variables.ShipGeo = ShipGeo</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>    </div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>    <span class="keyword">import</span> shipDet_conf</div>
<div class="line"><span class="lineno">   75</span>    run = ROOT.FairRunSim()</div>
<div class="line"><span class="lineno">   76</span>    run.SetName(<span class="stringliteral">&quot;TGeant4&quot;</span>)  <span class="comment"># Transport engine</span></div>
<div class="line"><span class="lineno">   77</span>    <span class="comment"># Create dummy output file as the  input file is updated directly and</span></div>
<div class="line"><span class="lineno">   78</span>    <span class="comment"># histograms are written to output file (hists.root by default)</span></div>
<div class="line"><span class="lineno">   79</span>    run.SetSink(ROOT.FairRootFileSink(ROOT.TMemFile(<span class="stringliteral">&#39;output&#39;</span>, <span class="stringliteral">&#39;recreate&#39;</span>)))</div>
<div class="line"><span class="lineno">   80</span>    run.SetUserConfig(<span class="stringliteral">&quot;g4Config_basic.C&quot;</span>) <span class="comment"># geant4 transport not used, only needed for the mag field</span></div>
<div class="line"><span class="lineno">   81</span>    rtdb = run.GetRuntimeDb()</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    modules = <a class="code hl_function" href="namespaceshipDet__conf.html#a7f232397871353ce80c1ea03eb15bd20">shipDet_conf.configure</a>(run,ShipGeo)</div>
<div class="line"><span class="lineno">   84</span>    run.Init()</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="comment">#run = ROOT.FairRunSim()</span></div>
<div class="line"><span class="lineno">   87</span>    <span class="comment">#modules = shipDet_conf.configure(run,ShipGeo)</span></div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>    </div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    <span class="keyword">import</span> geomGeant4</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span> hasattr(ShipGeo.Bfield,<span class="stringliteral">&quot;fieldMap&quot;</span>):</div>
<div class="line"><span class="lineno">   95</span>      fieldMaker = <a class="code hl_function" href="namespacegeomGeant4.html#a42125a41d1dc64cb48672d7c60266ae1">geomGeant4.addVMCFields</a>(ShipGeo, <span class="stringliteral">&#39;&#39;</span>, <span class="keyword">True</span>, withVirtualMC = <span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   97</span>      print(<span class="stringliteral">&quot;no fieldmap given, geofile too old, not anymore support&quot;</span>)</div>
<div class="line"><span class="lineno">   98</span>      exit(-1)</div>
<div class="line"><span class="lineno">   99</span>    sGeo = fgeo.Get(<span class="stringliteral">&quot;FAIRGeom&quot;</span>)</div>
<div class="line"><span class="lineno">  100</span>    geoMat =  ROOT.genfit.TGeoMaterialInterface()</div>
<div class="line"><span class="lineno">  101</span>    ROOT.genfit.MaterialEffects.getInstance().init(geoMat)</div>
<div class="line"><span class="lineno">  102</span>    bfield = ROOT.genfit.FairShipFields()</div>
<div class="line"><span class="lineno">  103</span>    bfield.setField(fieldMaker.getGlobalField())</div>
<div class="line"><span class="lineno">  104</span>    fM = ROOT.genfit.FieldManager.getInstance()</div>
<div class="line"><span class="lineno">  105</span>    fM.init(bfield)</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    </div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    <span class="comment"># Check input file</span></div>
<div class="line"><span class="lineno">  111</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  112</span>        fn = ROOT.TFile(input_file,<span class="stringliteral">&#39;update&#39;</span>)</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">  114</span>        print(<span class="stringliteral">&quot;An error with opening the input data file.&quot;</span>)</div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">raise</span></div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>    sTree = fn.Get(<span class="stringliteral">&quot;cbmsim&quot;</span>)</div>
<div class="line"><span class="lineno">  118</span>    sTree.Write()</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    </div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    h = init_book_hist()</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    </div>
<div class="line"><span class="lineno">  125</span>    <span class="keyword">import</span> shipPatRec</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>    <span class="comment"># Init book of hists for the quality measurements</span></div>
<div class="line"><span class="lineno">  128</span>    metrics = {<span class="stringliteral">&#39;n_hits&#39;</span>: [],</div>
<div class="line"><span class="lineno">  129</span>               <span class="stringliteral">&#39;reconstructible&#39;</span>: 0,</div>
<div class="line"><span class="lineno">  130</span>               <span class="stringliteral">&#39;passed_y12&#39;</span>: 0, <span class="stringliteral">&#39;passed_stereo12&#39;</span>: 0, <span class="stringliteral">&#39;passed_12&#39;</span>: 0,</div>
<div class="line"><span class="lineno">  131</span>               <span class="stringliteral">&#39;passed_y34&#39;</span>: 0, <span class="stringliteral">&#39;passed_stereo34&#39;</span>: 0, <span class="stringliteral">&#39;passed_34&#39;</span>: 0,</div>
<div class="line"><span class="lineno">  132</span>               <span class="stringliteral">&#39;passed_combined&#39;</span>: 0, <span class="stringliteral">&#39;reco_passed&#39;</span>: 0, <span class="stringliteral">&#39;reco_passed_no_clones&#39;</span>: 0,</div>
<div class="line"><span class="lineno">  133</span>               <span class="stringliteral">&#39;frac_y12&#39;</span>: [], <span class="stringliteral">&#39;frac_stereo12&#39;</span>: [], <span class="stringliteral">&#39;frac_12&#39;</span>: [],</div>
<div class="line"><span class="lineno">  134</span>               <span class="stringliteral">&#39;frac_y34&#39;</span>: [], <span class="stringliteral">&#39;frac_stereo34&#39;</span>: [], <span class="stringliteral">&#39;frac_34&#39;</span>: [],</div>
<div class="line"><span class="lineno">  135</span>               <span class="stringliteral">&#39;reco_frac_tot&#39;</span>: [],</div>
<div class="line"><span class="lineno">  136</span>               <span class="stringliteral">&#39;reco_mc_p&#39;</span>: [], <span class="stringliteral">&#39;reco_mc_theta&#39;</span>: [],</div>
<div class="line"><span class="lineno">  137</span>               <span class="stringliteral">&#39;fitted_p&#39;</span>: [], <span class="stringliteral">&#39;fitted_pval&#39;</span>: [], <span class="stringliteral">&#39;fitted_chi&#39;</span>: [],</div>
<div class="line"><span class="lineno">  138</span>               <span class="stringliteral">&#39;fitted_x&#39;</span>: [], <span class="stringliteral">&#39;fitted_y&#39;</span>: [], <span class="stringliteral">&#39;fitted_z&#39;</span>: [], <span class="stringliteral">&#39;fitted_mass&#39;</span>: []}</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    <span class="comment"># Start event loop</span></div>
<div class="line"><span class="lineno">  141</span>    nEvents   = sTree.GetEntries()</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordflow">for</span> iEvent <span class="keywordflow">in</span> range(nEvents):</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">if</span> iEvent%1000 == 0:</div>
<div class="line"><span class="lineno">  147</span>            print(<span class="stringliteral">&#39;Event &#39;</span>, iEvent)</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>        </div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>        rc = sTree.GetEvent(iEvent)</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>        </div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        reconstructible_tracks = getReconstructibleTracks(iEvent, sTree, sGeo, ShipGeo)</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>        metrics[<span class="stringliteral">&#39;reconstructible&#39;</span>] += len(reconstructible_tracks)</div>
<div class="line"><span class="lineno">  158</span>        <span class="keywordflow">for</span> i_reco <span class="keywordflow">in</span> reconstructible_tracks:</div>
<div class="line"><span class="lineno">  159</span>            h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].Fill(<span class="stringliteral">&quot;Reconstructible tracks&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  160</span>            h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].Fill(<span class="stringliteral">&quot;Reconstructible tracks&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>        in_y12 = []</div>
<div class="line"><span class="lineno">  163</span>        in_stereo12 = []</div>
<div class="line"><span class="lineno">  164</span>        in_12 = []</div>
<div class="line"><span class="lineno">  165</span>        in_y34 = []</div>
<div class="line"><span class="lineno">  166</span>        in_stereo34 = []</div>
<div class="line"><span class="lineno">  167</span>        in_34 = []</div>
<div class="line"><span class="lineno">  168</span>        in_combo = []</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>        found_track_ids = []</div>
<div class="line"><span class="lineno">  171</span>        n_tracks = len(reconstructible_tracks)</div>
<div class="line"><span class="lineno">  172</span>        n_recognized = 0</div>
<div class="line"><span class="lineno">  173</span>        n_clones = 0</div>
<div class="line"><span class="lineno">  174</span>        n_ghosts = 0</div>
<div class="line"><span class="lineno">  175</span>        n_others = 0</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>        min_eff = 0.</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>        </div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>        nTracklets = sTree.Tracklets.GetEntriesFast()</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">for</span> i_track <span class="keywordflow">in</span> range(nTracklets):</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>            atracklet = sTree.Tracklets[i_track]</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>            <span class="keywordflow">if</span> atracklet.getType() != 1: <span class="comment"># this is a not full track (tracklet)</span></div>
<div class="line"><span class="lineno">  188</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>            atrack = atracklet.getList()</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>            <span class="keywordflow">if</span> atrack.size() == 0:</div>
<div class="line"><span class="lineno">  193</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>            hits = {<span class="stringliteral">&#39;X&#39;</span>: [], <span class="stringliteral">&#39;Y&#39;</span>: [], <span class="stringliteral">&#39;Z&#39;</span>: [],</div>
<div class="line"><span class="lineno">  196</span>                    <span class="stringliteral">&#39;DetID&#39;</span>: [], <span class="stringliteral">&#39;TrackID&#39;</span>: [],</div>
<div class="line"><span class="lineno">  197</span>                    <span class="stringliteral">&#39;Pz&#39;</span>: [], <span class="stringliteral">&#39;Px&#39;</span>: [], <span class="stringliteral">&#39;Py&#39;</span>: [],</div>
<div class="line"><span class="lineno">  198</span>                    <span class="stringliteral">&#39;dist2Wire&#39;</span>: [], <span class="stringliteral">&#39;Pdg&#39;</span>: []}</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>            <span class="keywordflow">for</span> ihit <span class="keywordflow">in</span> atrack:</div>
<div class="line"><span class="lineno">  201</span>                ahit = sTree.strawtubesPoint[ihit]</div>
<div class="line"><span class="lineno">  202</span>                hits[<span class="stringliteral">&#39;X&#39;</span>] += [ahit.GetX()]</div>
<div class="line"><span class="lineno">  203</span>                hits[<span class="stringliteral">&#39;Y&#39;</span>] += [ahit.GetY()]</div>
<div class="line"><span class="lineno">  204</span>                hits[<span class="stringliteral">&#39;Z&#39;</span>] += [ahit.GetZ()]</div>
<div class="line"><span class="lineno">  205</span>                hits[<span class="stringliteral">&#39;DetID&#39;</span>] += [ahit.GetDetectorID()]</div>
<div class="line"><span class="lineno">  206</span>                hits[<span class="stringliteral">&#39;TrackID&#39;</span>] += [ahit.GetTrackID()]</div>
<div class="line"><span class="lineno">  207</span>                hits[<span class="stringliteral">&#39;Pz&#39;</span>] += [ahit.GetPz()]</div>
<div class="line"><span class="lineno">  208</span>                hits[<span class="stringliteral">&#39;Px&#39;</span>] += [ahit.GetPx()]</div>
<div class="line"><span class="lineno">  209</span>                hits[<span class="stringliteral">&#39;Py&#39;</span>] += [ahit.GetPy()]</div>
<div class="line"><span class="lineno">  210</span>                hits[<span class="stringliteral">&#39;dist2Wire&#39;</span>] += [ahit.dist2Wire()]</div>
<div class="line"><span class="lineno">  211</span>                hits[<span class="stringliteral">&#39;Pdg&#39;</span>] += [ahit.PdgCode()]</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>            <span class="comment"># List to numpy arrays</span></div>
<div class="line"><span class="lineno">  214</span>            <span class="keywordflow">for</span> key <span class="keywordflow">in</span> hits.keys():</div>
<div class="line"><span class="lineno">  215</span>                hits[key] = numpy.array(hits[key])</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>            <span class="comment"># Decoding</span></div>
<div class="line"><span class="lineno">  218</span>            decode = global_variables.modules[<span class="stringliteral">&quot;Strawtubes&quot;</span>].StrawDecode(hits[<span class="stringliteral">&#39;DetID&#39;</span>])</div>
<div class="line"><span class="lineno">  219</span>            <span class="comment"># StrawDecode returns a tuple of (statnb, vnb, lnb, snb).</span></div>
<div class="line"><span class="lineno">  220</span>            is_stereo = ((decode[1] == 1) + (decode[1] == 2))</div>
<div class="line"><span class="lineno">  221</span>            is_y = ((decode[1] == 0) + (decode[1] == 3))</div>
<div class="line"><span class="lineno">  222</span>            is_before = ((decode[0] == 1) + (decode[0] == 2))</div>
<div class="line"><span class="lineno">  223</span>            is_after = ((decode[0] == 3) + (decode[0] == 4))</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>            <span class="comment"># Metrics</span></div>
<div class="line"><span class="lineno">  227</span>            metrics[<span class="stringliteral">&#39;n_hits&#39;</span>] += [get_n_hits(hits[<span class="stringliteral">&#39;TrackID&#39;</span>])]</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>            <span class="comment"># Tracks passed</span></div>
<div class="line"><span class="lineno">  230</span>            frac_y12, tmax_y12 = fracMCsame(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_before * is_y])</div>
<div class="line"><span class="lineno">  231</span>            n_hits_y12 = get_n_hits(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_before * is_y])</div>
<div class="line"><span class="lineno">  232</span>            frac_stereo12, tmax_stereo12 = fracMCsame(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_before * is_stereo])</div>
<div class="line"><span class="lineno">  233</span>            n_hits_stereo12 = get_n_hits(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_before * is_stereo])</div>
<div class="line"><span class="lineno">  234</span>            frac_12, tmax_12 = fracMCsame(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_before])</div>
<div class="line"><span class="lineno">  235</span>            n_hits_12 = get_n_hits(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_before])</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>            frac_y34, tmax_y34 = fracMCsame(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_after * is_y])</div>
<div class="line"><span class="lineno">  238</span>            n_hits_y34 = get_n_hits(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_after * is_y])</div>
<div class="line"><span class="lineno">  239</span>            frac_stereo34, tmax_stereo34 = fracMCsame(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_after * is_stereo])</div>
<div class="line"><span class="lineno">  240</span>            n_hits_stereo34 = get_n_hits(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_after * is_stereo])</div>
<div class="line"><span class="lineno">  241</span>            frac_34, tmax_34 = fracMCsame(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_after])</div>
<div class="line"><span class="lineno">  242</span>            n_hits_34 = get_n_hits(hits[<span class="stringliteral">&#39;TrackID&#39;</span>][is_after])</div>
<div class="line"><span class="lineno">  243</span>            frac_tot, tmax_tot = fracMCsame(hits[<span class="stringliteral">&#39;TrackID&#39;</span>])</div>
<div class="line"><span class="lineno">  244</span>            n_hits_tot = get_n_hits(hits[<span class="stringliteral">&#39;TrackID&#39;</span>])</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>            <span class="keywordflow">if</span> tmax_y12 == tmax_stereo12 <span class="keywordflow">and</span> tmax_y12 == tmax_y34 <span class="keywordflow">and</span> tmax_y12 == tmax_stereo34:</div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">if</span> frac_y12 &gt;= min_eff <span class="keywordflow">and</span> frac_stereo12 &gt;= min_eff <span class="keywordflow">and</span> frac_y34 &gt;= min_eff <span class="keywordflow">and</span> frac_stereo34 &gt;= min_eff:</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>                    <span class="keywordflow">if</span> tmax_y12 <span class="keywordflow">in</span> reconstructible_tracks <span class="keywordflow">and</span> tmax_y12 <span class="keywordflow">not</span> <span class="keywordflow">in</span> found_track_ids:</div>
<div class="line"><span class="lineno">  250</span>                        n_recognized += 1</div>
<div class="line"><span class="lineno">  251</span>                        found_track_ids.append(tmax_y12)</div>
<div class="line"><span class="lineno">  252</span>                    <span class="keywordflow">elif</span> tmax_y12 <span class="keywordflow">in</span> reconstructible_tracks <span class="keywordflow">and</span> tmax_y12 <span class="keywordflow">in</span> found_track_ids:</div>
<div class="line"><span class="lineno">  253</span>                        n_clones += 1</div>
<div class="line"><span class="lineno">  254</span>                    <span class="keywordflow">elif</span> tmax_y12 <span class="keywordflow">not</span> <span class="keywordflow">in</span> reconstructible_tracks:</div>
<div class="line"><span class="lineno">  255</span>                        n_others += 1</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  258</span>                    n_ghosts += 1</div>
<div class="line"><span class="lineno">  259</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  260</span>                n_ghosts += 1</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>            is_reconstructed = 0</div>
<div class="line"><span class="lineno">  263</span>            is_reconstructed_no_clones = 0</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>            <span class="keywordflow">if</span> tmax_y12 <span class="keywordflow">in</span> reconstructible_tracks:</div>
<div class="line"><span class="lineno">  267</span>                metrics[<span class="stringliteral">&#39;passed_y12&#39;</span>] += 1</div>
<div class="line"><span class="lineno">  268</span>                metrics[<span class="stringliteral">&#39;frac_y12&#39;</span>] += [frac_y12]</div>
<div class="line"><span class="lineno">  269</span>                h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].Fill(<span class="stringliteral">&quot;Y view station 1&amp;2&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  270</span>                <span class="keywordflow">if</span> tmax_y12 <span class="keywordflow">not</span> <span class="keywordflow">in</span> in_y12:</div>
<div class="line"><span class="lineno">  271</span>                    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].Fill(<span class="stringliteral">&quot;Y view station 1&amp;2&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  272</span>                    in_y12.append(tmax_y12)</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>                <span class="keywordflow">if</span> tmax_stereo12 == tmax_y12:</div>
<div class="line"><span class="lineno">  275</span>                    metrics[<span class="stringliteral">&#39;passed_stereo12&#39;</span>] += 1</div>
<div class="line"><span class="lineno">  276</span>                    metrics[<span class="stringliteral">&#39;frac_stereo12&#39;</span>] += [frac_stereo12]</div>
<div class="line"><span class="lineno">  277</span>                    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].Fill(<span class="stringliteral">&quot;Stereo station 1&amp;2&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  278</span>                    <span class="keywordflow">if</span> tmax_stereo12 <span class="keywordflow">not</span> <span class="keywordflow">in</span> in_stereo12:</div>
<div class="line"><span class="lineno">  279</span>                        h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].Fill(<span class="stringliteral">&quot;Stereo station 1&amp;2&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  280</span>                        in_stereo12.append(tmax_stereo12)</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>                    <span class="keywordflow">if</span> tmax_12 == tmax_y12:</div>
<div class="line"><span class="lineno">  283</span>                        metrics[<span class="stringliteral">&#39;passed_12&#39;</span>] += 1</div>
<div class="line"><span class="lineno">  284</span>                        metrics[<span class="stringliteral">&#39;frac_12&#39;</span>] += [frac_12]</div>
<div class="line"><span class="lineno">  285</span>                        h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].Fill(<span class="stringliteral">&quot;station 1&amp;2&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  286</span>                        <span class="keywordflow">if</span> tmax_12 <span class="keywordflow">not</span> <span class="keywordflow">in</span> in_12:</div>
<div class="line"><span class="lineno">  287</span>                            h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].Fill(<span class="stringliteral">&quot;station 1&amp;2&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  288</span>                            in_12.append(tmax_12)</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>                        <span class="keywordflow">if</span> tmax_y34 <span class="keywordflow">in</span> reconstructible_tracks:</div>
<div class="line"><span class="lineno">  291</span>                            metrics[<span class="stringliteral">&#39;passed_y34&#39;</span>] += 1</div>
<div class="line"><span class="lineno">  292</span>                            metrics[<span class="stringliteral">&#39;frac_y34&#39;</span>] += [frac_y34]</div>
<div class="line"><span class="lineno">  293</span>                            h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].Fill(<span class="stringliteral">&quot;Y view station 3&amp;4&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  294</span>                            <span class="keywordflow">if</span> tmax_y34 <span class="keywordflow">not</span> <span class="keywordflow">in</span> in_y34:</div>
<div class="line"><span class="lineno">  295</span>                                h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].Fill(<span class="stringliteral">&quot;Y view station 3&amp;4&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  296</span>                                in_y34.append(tmax_y34)</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>                            <span class="keywordflow">if</span> tmax_stereo34 == tmax_y34:</div>
<div class="line"><span class="lineno">  299</span>                                metrics[<span class="stringliteral">&#39;passed_stereo34&#39;</span>] += 1</div>
<div class="line"><span class="lineno">  300</span>                                metrics[<span class="stringliteral">&#39;frac_stereo34&#39;</span>] += [frac_stereo34]</div>
<div class="line"><span class="lineno">  301</span>                                h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].Fill(<span class="stringliteral">&quot;Stereo station 3&amp;4&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  302</span>                                <span class="keywordflow">if</span> tmax_stereo34 <span class="keywordflow">not</span> <span class="keywordflow">in</span> in_stereo34:</div>
<div class="line"><span class="lineno">  303</span>                                    h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].Fill(<span class="stringliteral">&quot;Stereo station 3&amp;4&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  304</span>                                    in_stereo34.append(tmax_stereo34)</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>                                <span class="keywordflow">if</span> tmax_34 == tmax_y34:</div>
<div class="line"><span class="lineno">  307</span>                                    metrics[<span class="stringliteral">&#39;passed_34&#39;</span>] += 1</div>
<div class="line"><span class="lineno">  308</span>                                    metrics[<span class="stringliteral">&#39;frac_34&#39;</span>] += [frac_34]</div>
<div class="line"><span class="lineno">  309</span>                                    h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].Fill(<span class="stringliteral">&quot;station 3&amp;4&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  310</span>                                    <span class="keywordflow">if</span> tmax_34 <span class="keywordflow">not</span> <span class="keywordflow">in</span> in_34:</div>
<div class="line"><span class="lineno">  311</span>                                        h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].Fill(<span class="stringliteral">&quot;station 3&amp;4&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  312</span>                                        in_34.append(tmax_34)</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>                                    <span class="keywordflow">if</span> tmax_12 == tmax_34:</div>
<div class="line"><span class="lineno">  315</span>                                        metrics[<span class="stringliteral">&#39;passed_combined&#39;</span>] += 1</div>
<div class="line"><span class="lineno">  316</span>                                        h[<span class="stringliteral">&#39;TracksPassed&#39;</span>].Fill(<span class="stringliteral">&quot;Combined stations 1&amp;2/3&amp;4&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  317</span>                                        metrics[<span class="stringliteral">&#39;reco_passed&#39;</span>] += 1</div>
<div class="line"><span class="lineno">  318</span>                                        is_reconstructed = 1</div>
<div class="line"><span class="lineno">  319</span>                                        <span class="keywordflow">if</span> tmax_34 <span class="keywordflow">not</span> <span class="keywordflow">in</span> in_combo:</div>
<div class="line"><span class="lineno">  320</span>                                            h[<span class="stringliteral">&#39;TracksPassedU&#39;</span>].Fill(<span class="stringliteral">&quot;Combined stations 1&amp;2/3&amp;4&quot;</span>, 1)</div>
<div class="line"><span class="lineno">  321</span>                                            metrics[<span class="stringliteral">&#39;reco_passed_no_clones&#39;</span>] += 1</div>
<div class="line"><span class="lineno">  322</span>                                            in_combo.append(tmax_34)</div>
<div class="line"><span class="lineno">  323</span>                                            is_reconstructed_no_clones = 1</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>            <span class="comment"># For reconstructed tracks</span></div>
<div class="line"><span class="lineno">  326</span>            <span class="keywordflow">if</span> is_reconstructed == 0:</div>
<div class="line"><span class="lineno">  327</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>            metrics[<span class="stringliteral">&#39;reco_frac_tot&#39;</span>] += [frac_tot]</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>            <span class="comment"># Momentum</span></div>
<div class="line"><span class="lineno">  332</span>            Pz = hits[<span class="stringliteral">&#39;Pz&#39;</span>]</div>
<div class="line"><span class="lineno">  333</span>            Px = hits[<span class="stringliteral">&#39;Px&#39;</span>]</div>
<div class="line"><span class="lineno">  334</span>            Py = hits[<span class="stringliteral">&#39;Py&#39;</span>]</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>            p, px, py, pz = getPtruthFirst(sTree, tmax_tot)</div>
<div class="line"><span class="lineno">  337</span>            pt = math.sqrt(px**2 + py**2)</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>            Z_true = []</div>
<div class="line"><span class="lineno">  340</span>            X_true = []</div>
<div class="line"><span class="lineno">  341</span>            Y_true = []</div>
<div class="line"><span class="lineno">  342</span>            <span class="keywordflow">for</span> ahit <span class="keywordflow">in</span> sTree.strawtubesPoint:</div>
<div class="line"><span class="lineno">  343</span>                <span class="keywordflow">if</span> ahit.GetTrackID() == tmax_tot:</div>
<div class="line"><span class="lineno">  344</span>                    az, ax, ay = ahit.GetZ(),ahit.GetX(),ahit.GetY()</div>
<div class="line"><span class="lineno">  345</span>                    Z_true.append(az)</div>
<div class="line"><span class="lineno">  346</span>                    X_true.append(ax)</div>
<div class="line"><span class="lineno">  347</span>                    Y_true.append(ay)</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>            metrics[<span class="stringliteral">&#39;reco_mc_p&#39;</span>] += [p]</div>
<div class="line"><span class="lineno">  351</span>            h[<span class="stringliteral">&#39;TracksPassed_p&#39;</span>].Fill(p, 1)</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>            <span class="comment"># Direction</span></div>
<div class="line"><span class="lineno">  354</span>            Z = hits[<span class="stringliteral">&#39;Z&#39;</span>][(hits[<span class="stringliteral">&#39;TrackID&#39;</span>] == tmax_tot) * is_before]</div>
<div class="line"><span class="lineno">  355</span>            X = hits[<span class="stringliteral">&#39;X&#39;</span>][(hits[<span class="stringliteral">&#39;TrackID&#39;</span>] == tmax_tot) * is_before]</div>
<div class="line"><span class="lineno">  356</span>            Y = hits[<span class="stringliteral">&#39;Y&#39;</span>][(hits[<span class="stringliteral">&#39;TrackID&#39;</span>] == tmax_tot) * is_before]</div>
<div class="line"><span class="lineno">  357</span>            Z = Z - Z[0]</div>
<div class="line"><span class="lineno">  358</span>            X = X - X[0]</div>
<div class="line"><span class="lineno">  359</span>            Y = Y - Y[0]</div>
<div class="line"><span class="lineno">  360</span>            R = numpy.sqrt(X**2 + Y**2 + Z**2)</div>
<div class="line"><span class="lineno">  361</span>            Theta = numpy.arccos(Z[1:] / R[1:])</div>
<div class="line"><span class="lineno">  362</span>            theta = numpy.mean(Theta)</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>            metrics[<span class="stringliteral">&#39;reco_mc_theta&#39;</span>] += [theta]</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>            h[<span class="stringliteral">&#39;n_hits_reco_y12&#39;</span>].Fill(n_hits_y12)</div>
<div class="line"><span class="lineno">  367</span>            h[<span class="stringliteral">&#39;n_hits_reco_stereo12&#39;</span>].Fill(n_hits_stereo12)</div>
<div class="line"><span class="lineno">  368</span>            h[<span class="stringliteral">&#39;n_hits_reco_12&#39;</span>].Fill(n_hits_12)</div>
<div class="line"><span class="lineno">  369</span>            h[<span class="stringliteral">&#39;n_hits_reco_y34&#39;</span>].Fill(n_hits_y34)</div>
<div class="line"><span class="lineno">  370</span>            h[<span class="stringliteral">&#39;n_hits_reco_stereo34&#39;</span>].Fill(n_hits_stereo34)</div>
<div class="line"><span class="lineno">  371</span>            h[<span class="stringliteral">&#39;n_hits_reco_34&#39;</span>].Fill(n_hits_34)</div>
<div class="line"><span class="lineno">  372</span>            h[<span class="stringliteral">&#39;n_hits_reco&#39;</span>].Fill(n_hits_tot)</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>            h[<span class="stringliteral">&#39;n_hits_y12&#39;</span>].Fill(p, n_hits_y12)</div>
<div class="line"><span class="lineno">  375</span>            h[<span class="stringliteral">&#39;n_hits_stereo12&#39;</span>].Fill(p, n_hits_stereo12)</div>
<div class="line"><span class="lineno">  376</span>            h[<span class="stringliteral">&#39;n_hits_12&#39;</span>].Fill(p, n_hits_12)</div>
<div class="line"><span class="lineno">  377</span>            h[<span class="stringliteral">&#39;n_hits_y34&#39;</span>].Fill(p, n_hits_y34)</div>
<div class="line"><span class="lineno">  378</span>            h[<span class="stringliteral">&#39;n_hits_stereo34&#39;</span>].Fill(p, n_hits_stereo34)</div>
<div class="line"><span class="lineno">  379</span>            h[<span class="stringliteral">&#39;n_hits_34&#39;</span>].Fill(p, n_hits_34)</div>
<div class="line"><span class="lineno">  380</span>            h[<span class="stringliteral">&#39;n_hits_total&#39;</span>].Fill(p, n_hits_tot)</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>            h[<span class="stringliteral">&#39;frac_y12&#39;</span>].Fill(p, frac_y12)</div>
<div class="line"><span class="lineno">  383</span>            h[<span class="stringliteral">&#39;frac_stereo12&#39;</span>].Fill(p, frac_stereo12)</div>
<div class="line"><span class="lineno">  384</span>            h[<span class="stringliteral">&#39;frac_12&#39;</span>].Fill(p, frac_12)</div>
<div class="line"><span class="lineno">  385</span>            h[<span class="stringliteral">&#39;frac_y34&#39;</span>].Fill(p, frac_y34)</div>
<div class="line"><span class="lineno">  386</span>            h[<span class="stringliteral">&#39;frac_stereo34&#39;</span>].Fill(p, frac_stereo34)</div>
<div class="line"><span class="lineno">  387</span>            h[<span class="stringliteral">&#39;frac_34&#39;</span>].Fill(p, frac_34)</div>
<div class="line"><span class="lineno">  388</span>            h[<span class="stringliteral">&#39;frac_total&#39;</span>].Fill(p, frac_tot)</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>            h[<span class="stringliteral">&#39;frac_y12_dist&#39;</span>].Fill(frac_y12)</div>
<div class="line"><span class="lineno">  391</span>            h[<span class="stringliteral">&#39;frac_stereo12_dist&#39;</span>].Fill(frac_stereo12)</div>
<div class="line"><span class="lineno">  392</span>            h[<span class="stringliteral">&#39;frac_12_dist&#39;</span>].Fill(frac_12)</div>
<div class="line"><span class="lineno">  393</span>            h[<span class="stringliteral">&#39;frac_y34_dist&#39;</span>].Fill(frac_y34)</div>
<div class="line"><span class="lineno">  394</span>            h[<span class="stringliteral">&#39;frac_stereo34_dist&#39;</span>].Fill(frac_stereo34)</div>
<div class="line"><span class="lineno">  395</span>            h[<span class="stringliteral">&#39;frac_34_dist&#39;</span>].Fill(frac_34)</div>
<div class="line"><span class="lineno">  396</span>            h[<span class="stringliteral">&#39;frac_total_dist&#39;</span>].Fill(frac_tot)</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>            <span class="comment"># Fitted track</span></div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>            thetrack = sTree.FitTracks[i_track]</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>            fitStatus   = thetrack.getFitStatus()</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>            nmeas = fitStatus.getNdf()</div>
<div class="line"><span class="lineno">  405</span>            pval = fitStatus.getPVal()</div>
<div class="line"><span class="lineno">  406</span>            chi2 = fitStatus.getChi2() / nmeas</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>            metrics[<span class="stringliteral">&#39;fitted_pval&#39;</span>] += [pval]</div>
<div class="line"><span class="lineno">  409</span>            metrics[<span class="stringliteral">&#39;fitted_chi&#39;</span>] += [chi2]</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>            h[<span class="stringliteral">&#39;chi2fittedtracks&#39;</span>].Fill(chi2)</div>
<div class="line"><span class="lineno">  412</span>            h[<span class="stringliteral">&#39;pvalfittedtracks&#39;</span>].Fill(pval)</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>                fittedState = thetrack.getFittedState()</div>
<div class="line"><span class="lineno">  418</span>                fittedMom = fittedState.getMomMag()</div>
<div class="line"><span class="lineno">  419</span>                fittedMom = fittedMom <span class="comment">#*int(charge)</span></div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>                px_fit,py_fit,pz_fit = fittedState.getMom().x(),fittedState.getMom().y(),fittedState.getMom().z()</div>
<div class="line"><span class="lineno">  422</span>                p_fit = fittedMom</div>
<div class="line"><span class="lineno">  423</span>                pt_fit = math.sqrt(px_fit**2 + py_fit**2)</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>                metrics[<span class="stringliteral">&#39;fitted_p&#39;</span>] += [p_fit]</div>
<div class="line"><span class="lineno">  427</span>                perr = (p - p_fit) / p</div>
<div class="line"><span class="lineno">  428</span>                h[<span class="stringliteral">&#39;ptrue-p/ptrue&#39;</span>].Fill(perr)</div>
<div class="line"><span class="lineno">  429</span>                h[<span class="stringliteral">&#39;perr&#39;</span>].Fill(p, perr)</div>
<div class="line"><span class="lineno">  430</span>                h[<span class="stringliteral">&#39;perr_direction&#39;</span>].Fill(numpy.rad2deg(theta), perr)</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>                pterr = (pt - pt_fit) / pt</div>
<div class="line"><span class="lineno">  433</span>                h[<span class="stringliteral">&#39;pttrue-pt/pttrue&#39;</span>].Fill(pterr)</div>
<div class="line"><span class="lineno">  434</span> </div>
<div class="line"><span class="lineno">  435</span>                pxerr = (px - px_fit) / px</div>
<div class="line"><span class="lineno">  436</span>                h[<span class="stringliteral">&#39;pxtrue-px/pxtrue&#39;</span>].Fill(pxerr)</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>                pyerr = (py - py_fit) / py</div>
<div class="line"><span class="lineno">  439</span>                h[<span class="stringliteral">&#39;pytrue-py/pytrue&#39;</span>].Fill(pyerr)</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>                pzerr = (pz - pz_fit) / pz</div>
<div class="line"><span class="lineno">  442</span>                h[<span class="stringliteral">&#39;pztrue-pz/pztrue&#39;</span>].Fill(pzerr)</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>                <span class="keywordflow">if</span> math.fabs(p) &gt; 0.0 :</div>
<div class="line"><span class="lineno">  445</span>                    h[<span class="stringliteral">&#39;pvspfitted&#39;</span>].Fill(p, fittedMom)</div>
<div class="line"><span class="lineno">  446</span>                fittedtrackDir = fittedState.getDir()</div>
<div class="line"><span class="lineno">  447</span>                fittedx=math.degrees(math.acos(fittedtrackDir[0]))</div>
<div class="line"><span class="lineno">  448</span>                fittedy=math.degrees(math.acos(fittedtrackDir[1]))</div>
<div class="line"><span class="lineno">  449</span>                fittedz=math.degrees(math.acos(fittedtrackDir[2]))</div>
<div class="line"><span class="lineno">  450</span>                fittedmass = fittedState.getMass()</div>
<div class="line"><span class="lineno">  451</span>                h[<span class="stringliteral">&#39;momentumfittedtracks&#39;</span>].Fill(fittedMom)</div>
<div class="line"><span class="lineno">  452</span>                h[<span class="stringliteral">&#39;xdirectionfittedtracks&#39;</span>].Fill(fittedx)</div>
<div class="line"><span class="lineno">  453</span>                h[<span class="stringliteral">&#39;ydirectionfittedtracks&#39;</span>].Fill(fittedy)</div>
<div class="line"><span class="lineno">  454</span>                h[<span class="stringliteral">&#39;zdirectionfittedtracks&#39;</span>].Fill(fittedz)</div>
<div class="line"><span class="lineno">  455</span>                h[<span class="stringliteral">&#39;massfittedtracks&#39;</span>].Fill(fittedmass)</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>                metrics[<span class="stringliteral">&#39;fitted_x&#39;</span>] += [fittedx]</div>
<div class="line"><span class="lineno">  458</span>                metrics[<span class="stringliteral">&#39;fitted_y&#39;</span>] += [fittedy]</div>
<div class="line"><span class="lineno">  459</span>                metrics[<span class="stringliteral">&#39;fitted_z&#39;</span>] += [fittedz]</div>
<div class="line"><span class="lineno">  460</span>                metrics[<span class="stringliteral">&#39;fitted_mass&#39;</span>] += [fittedmass]</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>                Z_fit = []</div>
<div class="line"><span class="lineno">  464</span>                X_fit = []</div>
<div class="line"><span class="lineno">  465</span>                Y_fit = []</div>
<div class="line"><span class="lineno">  466</span>                <span class="keywordflow">for</span> az <span class="keywordflow">in</span> Z_true:</div>
<div class="line"><span class="lineno">  467</span>                    rc,pos,mom = extrapolateToPlane(thetrack, az)</div>
<div class="line"><span class="lineno">  468</span>                    Z_fit.append(pos.Z())</div>
<div class="line"><span class="lineno">  469</span>                    X_fit.append(pos.X())</div>
<div class="line"><span class="lineno">  470</span>                    Y_fit.append(pos.Y())</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>                <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(Z_true)):</div>
<div class="line"><span class="lineno">  473</span>                    xerr = abs(X_fit[i] - X_true[i])</div>
<div class="line"><span class="lineno">  474</span>                    yerr = abs(Y_fit[i] - Y_true[i])</div>
<div class="line"><span class="lineno">  475</span>                    h[<span class="stringliteral">&#39;abs(x - x-true)&#39;</span>].Fill(xerr)</div>
<div class="line"><span class="lineno">  476</span>                    h[<span class="stringliteral">&#39;abs(y - y-true)&#39;</span>].Fill(yerr)</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>                rmse_x = numpy.sqrt(numpy.mean((numpy.array(X_fit) - numpy.array(X_true))**2))</div>
<div class="line"><span class="lineno">  479</span>                rmse_y = numpy.sqrt(numpy.mean((numpy.array(Y_fit) - numpy.array(Y_true))**2))</div>
<div class="line"><span class="lineno">  480</span>                h[<span class="stringliteral">&#39;rmse_x&#39;</span>].Fill(rmse_x)</div>
<div class="line"><span class="lineno">  481</span>                h[<span class="stringliteral">&#39;rmse_y&#39;</span>].Fill(rmse_y)</div>
<div class="line"><span class="lineno">  482</span> </div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>            <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">  486</span>                print(<span class="stringliteral">&quot;Problem with fitted state.&quot;</span>)</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>        h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].Fill(<span class="stringliteral">&quot;N total&quot;</span>, n_tracks)</div>
<div class="line"><span class="lineno">  490</span>        h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].Fill(<span class="stringliteral">&quot;N recognized tracks&quot;</span>, n_recognized)</div>
<div class="line"><span class="lineno">  491</span>        h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].Fill(<span class="stringliteral">&quot;N clones&quot;</span>, n_clones)</div>
<div class="line"><span class="lineno">  492</span>        h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].Fill(<span class="stringliteral">&quot;N ghosts&quot;</span>, n_ghosts)</div>
<div class="line"><span class="lineno">  493</span>        h[<span class="stringliteral">&#39;Reco_tracks&#39;</span>].Fill(<span class="stringliteral">&quot;N others&quot;</span>, n_others)</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>    </div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>    save_hists(h, output_file)</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>    <span class="keywordflow">return</span> metrics</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="ttc" id="anamespacegeomGeant4_html_a42125a41d1dc64cb48672d7c60266ae1"><div class="ttname"><a href="namespacegeomGeant4.html#a42125a41d1dc64cb48672d7c60266ae1">geomGeant4.addVMCFields</a></div><div class="ttdeci">addVMCFields(shipGeo, controlFile='', verbose=False, withVirtualMC=True)</div><div class="ttdef"><b>Definition</b> <a href="geomGeant4_8py_source.html#l00135">geomGeant4.py:135</a></div></div>
<div class="ttc" id="anamespaceshipDet__conf_html_a7f232397871353ce80c1ea03eb15bd20"><div class="ttname"><a href="namespaceshipDet__conf.html#a7f232397871353ce80c1ea03eb15bd20">shipDet_conf.configure</a></div><div class="ttdeci">configure(run, ship_geo)</div><div class="ttdef"><b>Definition</b> <a href="shipDet__conf_8py_source.html#l00299">shipDet_conf.py:299</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a875df7febec3679ada1619e7c347dac1" name="a875df7febec3679ada1619e7c347dac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a875df7febec3679ada1619e7c347dac1">&#9670;&#160;</a></span>save_hists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.save_hists </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helping functions #####################################################. </p>
<p>Main functions ##############################################################</p>
<pre class="fragment">Save book of plots.
Parameters
----------
h : dict
    Dictionary of plots.
path : string
    Path where the plots will be saved.
</pre> 
<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00816">816</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  816</span><span class="keyword">def </span>save_hists(h, path):</div>
<div class="line"><span class="lineno">  817</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  818</span><span class="stringliteral">    Save book of plots.</span></div>
<div class="line"><span class="lineno">  819</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  820</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  821</span><span class="stringliteral">    h : dict</span></div>
<div class="line"><span class="lineno">  822</span><span class="stringliteral">        Dictionary of plots.</span></div>
<div class="line"><span class="lineno">  823</span><span class="stringliteral">    path : string</span></div>
<div class="line"><span class="lineno">  824</span><span class="stringliteral">        Path where the plots will be saved.</span></div>
<div class="line"><span class="lineno">  825</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  826</span>    ut.writeHists(h, path)</div>
<div class="line"><span class="lineno">  827</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a348735a590af3f354f03a440fd23573b" name="a348735a590af3f354f03a440fd23573b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a348735a590af3f354f03a440fd23573b">&#9670;&#160;</a></span>choices</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.choices</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00993">993</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>

</div>
</div>
<a id="a11c0a12bc12c6f289a0eb2ccb0c01a53" name="a11c0a12bc12c6f289a0eb2ccb0c01a53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11c0a12bc12c6f289a0eb2ccb0c01a53">&#9670;&#160;</a></span>default</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.default</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00992">992</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>

</div>
</div>
<a id="abc9eca6c9f512fcddfc991f29bac4b87" name="abc9eca6c9f512fcddfc991f29bac4b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc9eca6c9f512fcddfc991f29bac4b87">&#9670;&#160;</a></span>help</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.help</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00990">990</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>

</div>
</div>
<a id="a5999ce65eda12da41dc6c1d663202168" name="a5999ce65eda12da41dc6c1d663202168"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5999ce65eda12da41dc6c1d663202168">&#9670;&#160;</a></span>metrics</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.metrics = <a class="el" href="namespaceshipStrawTracking.html#a41edd2c3b1e3c557bed66f1a7bc69a34">run_track_pattern_recognition</a>(options.input, options.geo, options.output, options.method)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00996">996</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>

</div>
</div>
<a id="a227a906d2ad0b9acf995e73827e33015" name="a227a906d2ad0b9acf995e73827e33015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a227a906d2ad0b9acf995e73827e33015">&#9670;&#160;</a></span>options</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.options = parser.parse_args()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00994">994</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>

</div>
</div>
<a id="a6f1c8ab4a8627d83bd87a950231721c6" name="a6f1c8ab4a8627d83bd87a950231721c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f1c8ab4a8627d83bd87a950231721c6">&#9670;&#160;</a></span>parser</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.parser = ArgumentParser(description=__doc__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00989">989</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>

</div>
</div>
<a id="a33f41ada450d677435ffd880e7462d3a" name="a33f41ada450d677435ffd880e7462d3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33f41ada450d677435ffd880e7462d3a">&#9670;&#160;</a></span>required</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shipStrawTracking.required</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="shipStrawTracking_8py_source.html#l00990">990</a> of file <a class="el" href="shipStrawTracking_8py_source.html">shipStrawTracking.py</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceshipStrawTracking.html">shipStrawTracking</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
