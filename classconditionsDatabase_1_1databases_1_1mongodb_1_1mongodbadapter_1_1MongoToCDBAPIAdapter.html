<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FairShip: conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FairShip
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter:</div>
<div class="dyncontent">
<div class="center"><img src="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter__inherit__graph.png" border="0" usemap="#aconditionsDatabase_8databases_8mongodb_8mongodbadapter_8MongoToCDBAPIAdapter_inherit__map" alt="Inheritance graph"/></div>
<map name="aconditionsDatabase_8databases_8mongodb_8mongodbadapter_8MongoToCDBAPIAdapter_inherit__map" id="aconditionsDatabase_8databases_8mongodb_8mongodbadapter_8MongoToCDBAPIAdapter_inherit__map">
<area shape="rect" title=" " alt="" coords="5,169,411,211"/>
<area shape="rect" href="classconditionsDatabase_1_1interface_1_1APIInterface.html" title="Conditions Database Interface definition." alt="" coords="99,80,317,121"/>
<area shape="rect" title=" " alt="" coords="180,5,236,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter:</div>
<div class="dyncontent">
<div class="center"><img src="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter__coll__graph.png" border="0" usemap="#aconditionsDatabase_8databases_8mongodb_8mongodbadapter_8MongoToCDBAPIAdapter_coll__map" alt="Collaboration graph"/></div>
<map name="aconditionsDatabase_8databases_8mongodb_8mongodbadapter_8MongoToCDBAPIAdapter_coll__map" id="aconditionsDatabase_8databases_8mongodb_8mongodbadapter_8MongoToCDBAPIAdapter_coll__map">
<area shape="rect" title=" " alt="" coords="5,169,411,211"/>
<area shape="rect" href="classconditionsDatabase_1_1interface_1_1APIInterface.html" title="Conditions Database Interface definition." alt="" coords="99,80,317,121"/>
<area shape="rect" title=" " alt="" coords="180,5,236,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acc53d0798ca0c60eaab0c02bcae443d6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#acc53d0798ca0c60eaab0c02bcae443d6">__init__</a> (self, connection_dict)</td></tr>
<tr class="separator:acc53d0798ca0c60eaab0c02bcae443d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d3f95e50f620170e5d783c4f6bb78bf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a2d3f95e50f620170e5d783c4f6bb78bf">list_detectors</a> (self, parent_id=None)</td></tr>
<tr class="memdesc:a2d3f95e50f620170e5d783c4f6bb78bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list with all the detector names in the database.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a2d3f95e50f620170e5d783c4f6bb78bf">More...</a><br /></td></tr>
<tr class="separator:a2d3f95e50f620170e5d783c4f6bb78bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7516bd67d0c3dc95b1f9ed3e75a59d75"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a7516bd67d0c3dc95b1f9ed3e75a59d75">get_detector</a> (self, detector_id)</td></tr>
<tr class="memdesc:a7516bd67d0c3dc95b1f9ed3e75a59d75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a detector dictionary.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a7516bd67d0c3dc95b1f9ed3e75a59d75">More...</a><br /></td></tr>
<tr class="separator:a7516bd67d0c3dc95b1f9ed3e75a59d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a247cc554fb25921b377228a52c4fba9a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a247cc554fb25921b377228a52c4fba9a">add_detector</a> (self, name, parent_id=None)</td></tr>
<tr class="memdesc:a247cc554fb25921b377228a52c4fba9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new detector to the database.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a247cc554fb25921b377228a52c4fba9a">More...</a><br /></td></tr>
<tr class="separator:a247cc554fb25921b377228a52c4fba9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58c0c1791700889a3b5e4ce18db17278"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a58c0c1791700889a3b5e4ce18db17278">remove_detector</a> (self, detector_id)</td></tr>
<tr class="memdesc:a58c0c1791700889a3b5e4ce18db17278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a detector from the database.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a58c0c1791700889a3b5e4ce18db17278">More...</a><br /></td></tr>
<tr class="separator:a58c0c1791700889a3b5e4ce18db17278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858cb11f4b8faa0801dda91a3ee116b5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a858cb11f4b8faa0801dda91a3ee116b5">add_condition</a> (self, detector_id, name, tag, values, type=None, collected_at=datetime.now(), valid_since=datetime.now(), valid_until=datetime.max)</td></tr>
<tr class="memdesc:a858cb11f4b8faa0801dda91a3ee116b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a condition to a detector.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a858cb11f4b8faa0801dda91a3ee116b5">More...</a><br /></td></tr>
<tr class="separator:a858cb11f4b8faa0801dda91a3ee116b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29d9b0593780d8142ed32281e68b8a6e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a29d9b0593780d8142ed32281e68b8a6e">get_conditions</a> (self, detector_id)</td></tr>
<tr class="memdesc:a29d9b0593780d8142ed32281e68b8a6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list with all condition dictionaries associated with a detector.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a29d9b0593780d8142ed32281e68b8a6e">More...</a><br /></td></tr>
<tr class="separator:a29d9b0593780d8142ed32281e68b8a6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf26c095215e22cc56ad8a39b47bde2c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#aaf26c095215e22cc56ad8a39b47bde2c">get_conditions_by_name</a> (self, detector_id, name)</td></tr>
<tr class="memdesc:aaf26c095215e22cc56ad8a39b47bde2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list with condition dictionaries having a specific name for a given detector.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#aaf26c095215e22cc56ad8a39b47bde2c">More...</a><br /></td></tr>
<tr class="separator:aaf26c095215e22cc56ad8a39b47bde2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab83d2e5e1d258100c9558df704d813e5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#ab83d2e5e1d258100c9558df704d813e5">get_conditions_by_tag</a> (self, detector_id, tag)</td></tr>
<tr class="memdesc:ab83d2e5e1d258100c9558df704d813e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list with condition dictionaries having a specific tag for a given detector.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#ab83d2e5e1d258100c9558df704d813e5">More...</a><br /></td></tr>
<tr class="separator:ab83d2e5e1d258100c9558df704d813e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75894b572715aca97ed97c2fea705420"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a75894b572715aca97ed97c2fea705420">get_conditions_by_name_and_validity</a> (self, detector_id, name, start_date, end_date=None)</td></tr>
<tr class="memdesc:a75894b572715aca97ed97c2fea705420"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list with condition dictionaries associated with a detector that are valid on the specified date.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a75894b572715aca97ed97c2fea705420">More...</a><br /></td></tr>
<tr class="separator:a75894b572715aca97ed97c2fea705420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfcc0633b68a2dd4720e390f1c292262"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#adfcc0633b68a2dd4720e390f1c292262">get_condition_by_name_and_tag</a> (self, detector_id, name, tag)</td></tr>
<tr class="memdesc:adfcc0633b68a2dd4720e390f1c292262"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a condition dictionary of a specific condition belonging to a detector, identified by condition name and tag.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#adfcc0633b68a2dd4720e390f1c292262">More...</a><br /></td></tr>
<tr class="separator:adfcc0633b68a2dd4720e390f1c292262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a705c814b47a37ab19817876459d428ea"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a705c814b47a37ab19817876459d428ea">get_condition_by_name_and_collection_date</a> (self, detector_id, name, collected_at)</td></tr>
<tr class="memdesc:a705c814b47a37ab19817876459d428ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a condition dictionary of a specific condition belonging to a detector, identified by condition name and collection date/time.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a705c814b47a37ab19817876459d428ea">More...</a><br /></td></tr>
<tr class="separator:a705c814b47a37ab19817876459d428ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a528ec1223b38c9e4c92d872568a3c7d3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a528ec1223b38c9e4c92d872568a3c7d3">update_condition_by_name_and_tag</a> (self, detector_id, name, tag, type=None, valid_since=None, valid_until=None)</td></tr>
<tr class="memdesc:a528ec1223b38c9e4c92d872568a3c7d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the type, valid_since and valid_until values of a specific condition belonging to a detector, identified by condition name and tag.  <a href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a528ec1223b38c9e4c92d872568a3c7d3">More...</a><br /></td></tr>
<tr class="separator:a528ec1223b38c9e4c92d872568a3c7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab36498d7d43aa482621050be017a06ff"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#ab36498d7d43aa482621050be017a06ff">__get_connection</a> (self, connection_dict)</td></tr>
<tr class="separator:ab36498d7d43aa482621050be017a06ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafe254fba2f3095611fb1e2b71326324"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#aafe254fba2f3095611fb1e2b71326324">__delete_db</a> (self, db_name)</td></tr>
<tr class="separator:aafe254fba2f3095611fb1e2b71326324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c4aa01f07ecb33c3da79fc9300c004"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#ab4c4aa01f07ecb33c3da79fc9300c004">__validate_str</a> (self, input_string)</td></tr>
<tr class="separator:ab4c4aa01f07ecb33c3da79fc9300c004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad638e69b148e9edcfac0dbbdca526b47"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#ad638e69b148e9edcfac0dbbdca526b47">__validate_datetime</a> (self, input_datetime)</td></tr>
<tr class="separator:ad638e69b148e9edcfac0dbbdca526b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4bcf41b8d0fb441007c37389e5526a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a5a4bcf41b8d0fb441007c37389e5526a">__validate_path</a> (self, input_path)</td></tr>
<tr class="separator:a5a4bcf41b8d0fb441007c37389e5526a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d72d5b86624985fee9bc0a3558690e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#ac9d72d5b86624985fee9bc0a3558690e">__validate_interval_parameters</a> (self, input_date)</td></tr>
<tr class="separator:ac9d72d5b86624985fee9bc0a3558690e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacd1ad4ca7b8e1985af67485b78b578d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#aacd1ad4ca7b8e1985af67485b78b578d">__sanitize_str</a> (self, input_string)</td></tr>
<tr class="separator:aacd1ad4ca7b8e1985af67485b78b578d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e3c56afe7c3a677754855d850f7e3d9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a6e3c56afe7c3a677754855d850f7e3d9">__sanitize_path</a> (self, input_path)</td></tr>
<tr class="separator:a6e3c56afe7c3a677754855d850f7e3d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d5b5b0a55973a18fa9cdd91ae08104b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a4d5b5b0a55973a18fa9cdd91ae08104b">__convert_date</a> (self, input_date_string)</td></tr>
<tr class="separator:a4d5b5b0a55973a18fa9cdd91ae08104b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5368ab1fea97b78343ac571a40640c1d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a5368ab1fea97b78343ac571a40640c1d">__split_name</a> (self, detector_id)</td></tr>
<tr class="separator:a5368ab1fea97b78343ac571a40640c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20971dc45f122c9e3736cba168ffc598"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a20971dc45f122c9e3736cba168ffc598">__get_wrapper</a> (self, wrapper_id)</td></tr>
<tr class="separator:a20971dc45f122c9e3736cba168ffc598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544d9090138d0bc673a0207a904e2b8c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a544d9090138d0bc673a0207a904e2b8c">__get_subdetector</a> (self, detector, sub_name)</td></tr>
<tr class="separator:a544d9090138d0bc673a0207a904e2b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada9cbf1a79c542ae6b4d75a8831187fd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#ada9cbf1a79c542ae6b4d75a8831187fd">__get_detector</a> (self, detector_wrapper, detector_id)</td></tr>
<tr class="separator:ada9cbf1a79c542ae6b4d75a8831187fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2fc5b1ecb02787f98d65626062ddca4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#af2fc5b1ecb02787f98d65626062ddca4">__add_wrapper</a> (self, name)</td></tr>
<tr class="separator:af2fc5b1ecb02787f98d65626062ddca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87642a324ae6b34b626a79d61525785e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a87642a324ae6b34b626a79d61525785e">__remove_wrapper</a> (self, wrapper_id)</td></tr>
<tr class="separator:a87642a324ae6b34b626a79d61525785e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a33aaf1caae041ca9f96ea002f80d2420"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html#a33aaf1caae041ca9f96ea002f80d2420">__db_connection</a> = None</td></tr>
<tr class="separator:a33aaf1caae041ca9f96ea002f80d2420"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Adapter class for a MongoDB back-end that implements the CDB interface.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00027">27</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acc53d0798ca0c60eaab0c02bcae443d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc53d0798ca0c60eaab0c02bcae443d6">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>connection_dict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This constructor makes a connection to the MongoDB conditions DB.

:param connection_dict: The mongoDB configuration for making the connection
                        to the Conditions Database.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00034">34</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keyword">def </span>__init__(self, connection_dict):</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="stringliteral">        This constructor makes a connection to the MongoDB conditions DB.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="stringliteral">        :param connection_dict: The mongoDB configuration for making the connection</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="stringliteral">                                to the Conditions Database.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        self.__db_connection = self.__get_connection(connection_dict)</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af2fc5b1ecb02787f98d65626062ddca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2fc5b1ecb02787f98d65626062ddca4">&#9670;&nbsp;</a></span>__add_wrapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__add_wrapper </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Creates a new DetectorWrapper object and stores it in the DB.
Returns this new wrapper or None if a detector with that name
already exists.

:param name: (String) uniquely identifying the wrapper.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00230">230</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keyword">def </span>__add_wrapper(self, name):</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="stringliteral">        Creates a new DetectorWrapper object and stores it in the DB.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="stringliteral">        Returns this new wrapper or None if a detector with that name</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="stringliteral">        already exists.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="stringliteral">        :param name: (String) uniquely identifying the wrapper.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> DetectorWrapper.objects(name=name):</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            wrapper = DetectorWrapper()</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            wrapper.name = name</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            wrapper.save()</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordflow">return</span> wrapper</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d5b5b0a55973a18fa9cdd91ae08104b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d5b5b0a55973a18fa9cdd91ae08104b">&#9670;&nbsp;</a></span>__convert_date()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__convert_date </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_date_string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">This method converts a date string to a datetime Object.

:param  input_date_string: String representing a date
        Accepted String formats: "Year", "Year-Month", "Year-Month-Day", "Year-Month-Day Hours",
        "Year-Month-Day Hours-Minutes", "Year-Month-Day Hours-Minutes-Seconds".
:throw  ValueError: If input_date_string is not as specified.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00126">126</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">def </span>__convert_date(self, input_date_string):</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="stringliteral">        This method converts a date string to a datetime Object.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="stringliteral">        :param  input_date_string: String representing a date</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="stringliteral">        Accepted String formats: &quot;Year&quot;, &quot;Year-Month&quot;, &quot;Year-Month-Day&quot;, &quot;Year-Month-Day Hours&quot;,</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="stringliteral">        &quot;Year-Month-Day Hours-Minutes&quot;, &quot;Year-Month-Day Hours-Minutes-Seconds&quot;.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="stringliteral">        :throw  ValueError: If input_date_string is not as specified.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="comment"># Accepted formats for input_date_string</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        time_stamp_str_format = [<span class="stringliteral">&quot;%Y&quot;</span>, <span class="stringliteral">&quot;%Y-%m&quot;</span>, <span class="stringliteral">&quot;%Y-%m-%d&quot;</span>, <span class="stringliteral">&quot;%Y-%m-%d %H&quot;</span>, <span class="stringliteral">&quot;%Y-%m-%d %H:%M&quot;</span>,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                 <span class="stringliteral">&quot;%Y-%m-%d %H:%M:%S&quot;</span>]</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        datetime_value = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">for</span> time_stamp_format <span class="keywordflow">in</span> time_stamp_str_format:</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                datetime_value = datetime.strptime(input_date_string, time_stamp_format)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <span class="keywordflow">break</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">except</span> ValueError:</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">if</span> datetime_value <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Please pass the correct date input. This date string should &quot;</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                             <span class="stringliteral">&quot;contain only digits/:/ /-. The minimum length could be 4 digits, &quot;</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                             <span class="stringliteral">&quot;representing the year. &quot;</span>)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">return</span> datetime_value</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="aafe254fba2f3095611fb1e2b71326324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafe254fba2f3095611fb1e2b71326324">&#9670;&nbsp;</a></span>__delete_db()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__delete_db </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>db_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Delete the specified database.

:param db_name: The name of the DB that needs to be deleted.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00055">55</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">def </span>__delete_db(self, db_name):</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="stringliteral">        Delete the specified database.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="stringliteral">        :param db_name: The name of the DB that needs to be deleted.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        self.__db_connection.drop_database(db_name)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab36498d7d43aa482621050be017a06ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab36498d7d43aa482621050be017a06ff">&#9670;&nbsp;</a></span>__get_connection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__get_connection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>connection_dict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Create a connection to a MongoDB server and return the connection handle.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00043">43</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">def </span>__get_connection(self, connection_dict):</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="stringliteral">        Create a connection to a MongoDB server and return the connection handle.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordflow">return</span> connect(</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            db=connection_dict[<span class="stringliteral">&#39;db_name&#39;</span>],</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            username=connection_dict[<span class="stringliteral">&#39;user&#39;</span>],</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            password=connection_dict[<span class="stringliteral">&#39;password&#39;</span>],</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            host=connection_dict[<span class="stringliteral">&#39;host&#39;</span>],</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            port=connection_dict[<span class="stringliteral">&#39;port&#39;</span>]</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        )</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ada9cbf1a79c542ae6b4d75a8831187fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada9cbf1a79c542ae6b4d75a8831187fd">&#9670;&nbsp;</a></span>__get_detector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__get_detector </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_wrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns a Detector object identified by detector_id.
It raises ValueError if the detector_id could not be found.

:param detector_wrapper: DetectorWrapper object that contains a detector tree.
:param detector_id: (String) The ID (i.e. path) to the detector that
must be retrieved.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00205">205</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keyword">def </span>__get_detector(self, detector_wrapper, detector_id):</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">        Returns a Detector object identified by detector_id.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="stringliteral">        It raises ValueError if the detector_id could not be found.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="stringliteral">        :param detector_wrapper: DetectorWrapper object that contains a detector tree.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="stringliteral">        :param detector_id: (String) The ID (i.e. path) to the detector that</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="stringliteral">        must be retrieved.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        detector_names = self.__split_name(detector_id)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        detector = detector_wrapper.detector</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        path = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(1, len(detector_names)):</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            detector = self.__get_subdetector(detector, detector_names[i])</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            path = path + <span class="stringliteral">&quot;/&quot;</span> + detector_names[i]</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">if</span> detector <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                path = self.__sanitize_path(path)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &quot;</span> +</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                 path +</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                 <span class="stringliteral">&quot; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">return</span> detector</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a544d9090138d0bc673a0207a904e2b8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a544d9090138d0bc673a0207a904e2b8c">&#9670;&nbsp;</a></span>__get_subdetector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__get_subdetector </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sub_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns a subdetector with name sub_name under the specified parent detector.

:param detector: Detector object.
:param sub_name: (String) name of the subdetector that should be returned.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00191">191</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">def </span>__get_subdetector(self, detector, sub_name):</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="stringliteral">        Returns a subdetector with name sub_name under the specified parent detector.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="stringliteral">        :param detector: Detector object.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="stringliteral">        :param sub_name: (String) name of the subdetector that should be returned.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            subdetector = detector.subdetectors.get(name=sub_name)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">except</span>:</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">return</span> subdetector</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a20971dc45f122c9e3736cba168ffc598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20971dc45f122c9e3736cba168ffc598">&#9670;&nbsp;</a></span>__get_wrapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__get_wrapper </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>wrapper_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns a DetectorWrapper object. Otherwise it raises a
ValueError exception if the wrapper_id could not be found.

:param wrapper_id: String specifying the ID for the wrapper to be returned.
Must be unique. Must not contain a forward slash (i.e. /).
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00167">167</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">def </span>__get_wrapper(self, wrapper_id):</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="stringliteral">        Returns a DetectorWrapper object. Otherwise it raises a</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="stringliteral">        ValueError exception if the wrapper_id could not be found.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="stringliteral">        :param wrapper_id: String specifying the ID for the wrapper to be returned.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="stringliteral">        Must be unique. Must not contain a forward slash (i.e. /).</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(wrapper_id):</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Please pass the correct type of the ID for the new detector. &quot;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                             <span class="stringliteral">&quot;It must be unique, and it must not contain a forward slash &quot;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                             <span class="stringliteral">&quot;(i.e. /)&quot;</span>)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        wrapper_id = self.__sanitize_path(wrapper_id)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        detector_names = self.__split_name(wrapper_id)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            detector_wrapper = DetectorWrapper.objects().get(name=detector_names[0])</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">return</span> detector_wrapper</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">except</span>:</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector wrapper &quot;</span>,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                             detector_names[0],</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                             <span class="stringliteral">&quot; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a87642a324ae6b34b626a79d61525785e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87642a324ae6b34b626a79d61525785e">&#9670;&nbsp;</a></span>__remove_wrapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__remove_wrapper </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>wrapper_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Removes a detector wrapper and its contents from the database.

:param wrapper_id: (String) identifying the wrapper to remove.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00244">244</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keyword">def </span>__remove_wrapper(self, wrapper_id):</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="stringliteral">        Removes a detector wrapper and its contents from the database.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="stringliteral">        :param wrapper_id: (String) identifying the wrapper to remove.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            wrapper = self.__get_wrapper(wrapper_id)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                             wrapper_id,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        wrapper.delete()</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e3c56afe7c3a677754855d850f7e3d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e3c56afe7c3a677754855d850f7e3d9">&#9670;&nbsp;</a></span>__sanitize_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__sanitize_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">This method removes slashes and spaces at the beginning and
at the end of the parameter input_path.

:param input_path: string that will be sanitized.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00116">116</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keyword">def </span>__sanitize_path(self, input_path):</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="stringliteral">        This method removes slashes and spaces at the beginning and</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="stringliteral">        at the end of the parameter input_path.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="stringliteral">        :param input_path: string that will be sanitized.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        input_path = self.__sanitize_str(input_path)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">return</span> input_path.strip(<span class="stringliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="aacd1ad4ca7b8e1985af67485b78b578d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacd1ad4ca7b8e1985af67485b78b578d">&#9670;&nbsp;</a></span>__sanitize_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__sanitize_str </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">This method removes spaces at the beginning and at the end of the string and
returns the String without spaces.

:param input_string: string that will be sanitized.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00107">107</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">def </span>__sanitize_str(self, input_string):</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="stringliteral">        This method removes spaces at the beginning and at the end of the string and</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="stringliteral">        returns the String without spaces.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="stringliteral">        :param input_string: string that will be sanitized.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">return</span> input_string.strip()</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5368ab1fea97b78343ac571a40640c1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5368ab1fea97b78343ac571a40640c1d">&#9670;&nbsp;</a></span>__split_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__split_name </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Splits the detector_id string using '/' and returns a list of detector names.
Otherwise raises an exception if detector_id is not a valid path / id.

:param detector_id: path to a detector (e.g. detect_name/subdetector_name/...).
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00154">154</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">def </span>__split_name(self, detector_id):</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="stringliteral">        Splits the detector_id string using &#39;/&#39; and returns a list of detector names.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="stringliteral">        Otherwise raises an exception if detector_id is not a valid path / id.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="stringliteral">        :param detector_id: path to a detector (e.g. detect_name/subdetector_name/...).</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> self.__validate_path(detector_id):</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            detector_id = self.__sanitize_path(detector_id)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordflow">return</span> detector_id.split(<span class="stringliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;The provided detector_id needs to be a valid path&quot;</span>)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad638e69b148e9edcfac0dbbdca526b47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad638e69b148e9edcfac0dbbdca526b47">&#9670;&nbsp;</a></span>__validate_datetime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__validate_datetime </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_datetime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">This method validates if input_datetime is of datetime type.
If it is not of datetime type it returns False.

:param input_datetime: value that needs to be tested.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00074">74</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">def </span>__validate_datetime(self, input_datetime):</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="stringliteral">        This method validates if input_datetime is of datetime type.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="stringliteral">        If it is not of datetime type it returns False.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="stringliteral">        :param input_datetime: value that needs to be tested.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">if</span> <a class="code" href="namespaceadd__noise__to__field.html#aa1214d0959ccc6208cc336ba72961a17">type</a>(input_datetime) == datetime:</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="ttc" id="anamespaceadd__noise__to__field_html_aa1214d0959ccc6208cc336ba72961a17"><div class="ttname"><a href="namespaceadd__noise__to__field.html#aa1214d0959ccc6208cc336ba72961a17">add_noise_to_field.type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="add__noise__to__field_8py_source.html#l00053">add_noise_to_field.py:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9d72d5b86624985fee9bc0a3558690e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d72d5b86624985fee9bc0a3558690e">&#9670;&nbsp;</a></span>__validate_interval_parameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__validate_interval_parameters </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_date</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">This method validates if input_date is a datetime type or string.
If yes, it returns True. Otherwise it returns False.

:param input_date: It could be String or datetime type.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00096">96</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">def </span>__validate_interval_parameters(self, input_date):</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="stringliteral">        This method validates if input_date is a datetime type or string.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="stringliteral">        If yes, it returns True. Otherwise it returns False.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="stringliteral">        :param input_date: It could be String or datetime type.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">if</span> <a class="code" href="namespaceadd__noise__to__field.html#aa1214d0959ccc6208cc336ba72961a17">type</a>(input_date) == datetime <span class="keywordflow">or</span> <a class="code" href="namespaceadd__noise__to__field.html#aa1214d0959ccc6208cc336ba72961a17">type</a>(input_date) == str:</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a4bcf41b8d0fb441007c37389e5526a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4bcf41b8d0fb441007c37389e5526a">&#9670;&nbsp;</a></span>__validate_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__validate_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">This method validates if input_path is a valid path.
If it is not of String type it returns False.

:param input_path: value that needs to be tested.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00085">85</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keyword">def </span>__validate_path(self, input_path):</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="stringliteral">        This method validates if input_path is a valid path.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="stringliteral">        If it is not of String type it returns False.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="stringliteral">        :param input_path: value that needs to be tested.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">if</span> <a class="code" href="namespaceadd__noise__to__field.html#aa1214d0959ccc6208cc336ba72961a17">type</a>(input_path) == str:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab4c4aa01f07ecb33c3da79fc9300c004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c4aa01f07ecb33c3da79fc9300c004">&#9670;&nbsp;</a></span>__validate_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__validate_str </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">This method validates if input_string is of string type.
If it is not of String type it returns False.

:param input_string: value that needs to be tested.
</pre> 
<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00063">63</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">def </span>__validate_str(self, input_string):</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="stringliteral">        This method validates if input_string is of string type.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="stringliteral">        If it is not of String type it returns False.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="stringliteral">        :param input_string: value that needs to be tested.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">if</span> <a class="code" href="namespaceadd__noise__to__field.html#aa1214d0959ccc6208cc336ba72961a17">type</a>(input_string) == str:</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a858cb11f4b8faa0801dda91a3ee116b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a858cb11f4b8faa0801dda91a3ee116b5">&#9670;&nbsp;</a></span>add_condition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.add_condition </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>type</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>collected_at</em> = <code>datetime.now()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>valid_since</em> = <code>datetime.now()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>valid_until</em> = <code>datetime.max</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a condition to a detector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector to which the condition will be added (i.e. 'muonflux/driftTubes'). </td></tr>
    <tr><td class="paramname">name</td><td>String specifying the name of the condition (e.g. 'strawPositions'). </td></tr>
    <tr><td class="paramname">tag</td><td>String specifying a tag for the condition. Must be unique for the same condition name. </td></tr>
    <tr><td class="paramname">values</td><td>The values of the condition. Can be any data type. </td></tr>
    <tr><td class="paramname">type</td><td>(optional) String specifying the type of condition (e.g. 'calibration'). </td></tr>
    <tr><td class="paramname">collected_at</td><td>(optional) Timestamp specifying the date/time the condition was acquired. Must be unique w.r.t. the condition name. Can be of type String or datetime. This timestamp will be stored with an accuracy up to seconds. If unspecified, this value will be set to 'datetime.now'. </td></tr>
    <tr><td class="paramname">valid_since</td><td>(optional) Timestamp specifying the date/time as of when the condition is valid. Can be of type String or datetime. This timestamp will be stored with an accuracy up to seconds. If unspecified, this value will be set to 'datetime.now'. </td></tr>
    <tr><td class="paramname">valid_until</td><td>(optional) Timestamp specifying the date/time up until the condition is valid. Can be of type String or datetime. If unspecified, this value will be set to 'datetime.max'. This timestamp will be stored with an accuracy up to seconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#a0a3e2e11f18def5a41a0a74b6f28fccf">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00421">421</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                      valid_until=datetime.max):</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span> detector_id == <span class="stringliteral">&quot;&quot;</span> <span class="keywordflow">or</span> name == <span class="stringliteral">&quot;&quot;</span> <span class="keywordflow">or</span> tag == <span class="stringliteral">&quot;&quot;</span> <span class="keywordflow">or</span> values == <span class="stringliteral">&quot;&quot;</span> <span class="keywordflow">or</span> values <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct parameters: parameters detector_id, name, &quot;</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                            <span class="stringliteral">&quot;tag, values should not be empty&quot;</span>)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                self.__validate_path(detector_id)</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                <span class="keywordflow">and</span> self.__validate_str(tag)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                <span class="keywordflow">and</span> self.__validate_str(name)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        ):</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: detector_id, &quot;</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                            <span class="stringliteral">&quot;tag, and name should be String&quot;</span>)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                (self.__validate_interval_parameters(valid_since) <span class="keywordflow">or</span> valid_since <span class="keywordflow">is</span> <span class="keywordtype">None</span>)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">and</span> (self.__validate_interval_parameters(valid_until) <span class="keywordflow">or</span> valid_until <span class="keywordflow">is</span> <span class="keywordtype">None</span>)</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                <span class="keywordflow">and</span> (self.__validate_interval_parameters(collected_at) <span class="keywordflow">or</span> collected_at <span class="keywordflow">is</span> <span class="keywordtype">None</span>)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        ):</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordflow">raise</span> TypeError(</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                <span class="stringliteral">&quot;Please pass the correct type of input: valid_since, valid_until and collected_at &quot;</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                <span class="stringliteral">&quot;should be either String or datetime object&quot;</span>)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(type) <span class="keywordflow">and</span> type != <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">raise</span> TypeError(</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                <span class="stringliteral">&quot;Please pass the correct type of input: type should be String&quot;</span>)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment"># Converting all dates given as a String to a datetime object</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">if</span> self.__validate_str(valid_until):</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            valid_until = self.__convert_date(valid_until)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">elif</span> self.__validate_datetime(valid_until):</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="comment"># Strip off the microseconds</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            valid_until = valid_until.replace(microsecond=0)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">if</span> self.__validate_str(valid_since):</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            valid_since = self.__convert_date(valid_since)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">elif</span> self.__validate_datetime(valid_since):</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="comment"># Strip off the microseconds</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            valid_since = valid_since.replace(microsecond=0)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">if</span> self.__validate_str(collected_at):</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            collected_at = self.__convert_date(collected_at)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">elif</span> self.__validate_datetime(collected_at):</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="comment"># Strip off the microseconds</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            collected_at = collected_at.replace(microsecond=0)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">if</span> valid_since &gt; valid_until:</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Incorrect validity interval&quot;</span>)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="comment"># Get the detector with the specified detector_id</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            detector_wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        detector = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            detector = self.__get_detector(detector_wrapper, detector_id)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The requested detector &#39;&quot;</span> + detector_id + <span class="stringliteral">&quot;&#39; does not exist.&quot;</span>)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="comment"># Check if this condition already exists in the database</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        condition = self.get_condition_by_name_and_tag(detector_id, name, tag)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">if</span> condition <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;A condition with the same tag &#39;&quot;</span>, tag, <span class="stringliteral">&quot;&#39; already exists&quot;</span>)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        name = self.__sanitize_str(name)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        tag = self.__sanitize_str(tag)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment"># Create a new condition and associate it to the detector</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        condition = Condition()</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        condition.name = name</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        condition.tag = tag</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        condition.values = values</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        condition.type = type</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        condition.collected_at = collected_at</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        condition.valid_until = valid_until</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        condition.valid_since = valid_since</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        detector.conditions.append(condition)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        detector_wrapper.save()</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a247cc554fb25921b377228a52c4fba9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a247cc554fb25921b377228a52c4fba9a">&#9670;&nbsp;</a></span>add_detector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.add_detector </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>parent_id</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a new detector to the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>String specifying the name for the new detector. Must be unique. Must not contain a forward slash (i.e. /). </td></tr>
    <tr><td class="paramname">parent_id</td><td>(optional) String identifying the parent detector the new detector should be added to as subdetector. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If parent_id does not exist. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#aac8a97a972eb20b65affe899192d4758">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00315">315</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keyword">def </span>add_detector(self, name, parent_id=None):</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(name):</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: name should be String&quot;</span>)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment"># Detector names cannot be empty string</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;&quot;</span>:</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Please pass the correct value of input: name should not &quot;</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                             <span class="stringliteral">&quot;be an empty string&quot;</span>)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment"># If a / is in the name parameter we raise ValueError Exception</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;/&#39;</span> <span class="keywordflow">in</span> name:</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The name parameter cannot contain a / &quot;</span>)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment"># Remove any unwanted symbols from the name</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        name = self.__sanitize_str(name)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="comment"># This executes when trying to add a root level detector and wrapper</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">if</span> parent_id <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> parent_id <span class="keywordflow">is</span> <span class="stringliteral">&quot;&quot;</span>:</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            wrapper = self.__add_wrapper(name)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">if</span> wrapper <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                detector = Detector()</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                detector.name = name</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                wrapper.detector = detector</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                wrapper.save()</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="comment"># If the wrapper already exist throw an error</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span> + name + <span class="stringliteral">&quot;&#39; already exists&quot;</span>)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="comment"># If we add a subdetector</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_path(parent_id):</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: parent_id  &quot;</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                <span class="stringliteral">&quot;should be String&quot;</span>)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            parent_id = self.__sanitize_path(parent_id)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            detector_names = self.__split_name(parent_id)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                detector_wrapper = self.__get_wrapper(detector_names[0])</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                                 detector_names[0],</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                 <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                detector = self.__get_detector(detector_wrapper, parent_id)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                added_detector = Detector()</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                added_detector.name = name</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector with id &#39;&quot;</span> + parent_id + <span class="stringliteral">&quot;&#39; does not exist&quot;</span>)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                detector.subdetectors.get(name=name)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">except</span>:</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                detector.subdetectors.append(added_detector)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                detector_wrapper.save()</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="keywordflow">return</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Detector &#39;&quot;</span> + parent_id + <span class="stringliteral">&quot;/&quot;</span> + name + <span class="stringliteral">&quot;&#39; already exist&quot;</span>)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a705c814b47a37ab19817876459d428ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a705c814b47a37ab19817876459d428ea">&#9670;&nbsp;</a></span>get_condition_by_name_and_collection_date()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.get_condition_by_name_and_collection_date </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>collected_at</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a condition dictionary of a specific condition belonging to a detector, identified by condition name and collection date/time. </p>
<p>This combination must be unique. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector for which the condition must be retrieved (i.e. 'muonflux/driftTubes'). </td></tr>
    <tr><td class="paramname">name</td><td>String specifying the name of the conditions to be retrieved (e.g. 'strawPositions'). </td></tr>
    <tr><td class="paramname">collected_at</td><td>Timestamp specifying the moment on which the condition was collected/measured. Can be of type String or datetime. Collection dates are stored with accuracy up to seconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Dict</td><td>A dictionary adhering to the following specification: Condition = { 'name': String, 'tag': String, 'type': String, 'collected_at': datetime, 'valid_since': datetime, 'valid_until': datetime, 'values': mixed } </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#abca4c994fdddd73130faf48b28478036">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00725">725</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keyword">def </span>get_condition_by_name_and_collection_date(self, detector_id, name, collected_at):</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="comment"># Input validation</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(detector_id):</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: &quot;</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                            <span class="stringliteral">&quot;detector_id should be String&quot;</span>)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (self.__validate_str(name) <span class="keywordflow">and</span> self.__validate_interval_parameters(collected_at)):</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            <span class="keywordflow">raise</span> TypeError(</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                <span class="stringliteral">&quot;Please pass the valid input type: name should be String, collected_at could be &quot;</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                <span class="stringliteral">&quot;either datetime or String type.&quot;</span>)</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="comment"># Input sanitization</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        name = self.__sanitize_str(name)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="comment"># Converting all dates given as a String to a datetime object</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordflow">if</span> self.__validate_str(collected_at):</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            collected_at = self.__convert_date(collected_at)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">elif</span> self.__validate_datetime(collected_at):</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="comment"># Strip off the microseconds</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            collected_at = collected_at.replace(microsecond=0)</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="comment"># Get the detector of the specified detector_id</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            detector_wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        detector = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            detector = self.__get_detector(detector_wrapper, detector_id)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The requested detector &#39;&quot;</span> + detector_id + <span class="stringliteral">&quot;&#39; does not exist.&quot;</span>)</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="comment"># Query the condition where the &#39;name&#39; and &#39;collected_at&#39; equal the specified name and</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="comment"># collection_date</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            condition = detector.conditions.get(name=name, collected_at=collected_at)</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <span class="comment"># Convert the internal Condition object to a generic Python dict type</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="keywordflow">return</span> loads(condition.to_json())</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">except</span> DoesNotExist:</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="adfcc0633b68a2dd4720e390f1c292262"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfcc0633b68a2dd4720e390f1c292262">&#9670;&nbsp;</a></span>get_condition_by_name_and_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.get_condition_by_name_and_tag </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a condition dictionary of a specific condition belonging to a detector, identified by condition name and tag. </p>
<p>This combination must be unique. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector for which the condition must be retrieved (i.e. 'muonflux/driftTubes'). </td></tr>
    <tr><td class="paramname">name</td><td>String specifying the name of the conditions to be retrieved (e.g. 'strawPositions'). </td></tr>
    <tr><td class="paramname">tag</td><td>String specifying the tag of the condition to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Dict</td><td>A dictionary adhering to the following specification: Condition = { 'name': String, 'tag': String, 'type': String, 'collected_at': datetime, 'valid_since': datetime, 'valid_until': datetime, 'values': mixed } </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#a90b21c5ce89667b58c0a570c28253a68">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00688">688</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keyword">def </span>get_condition_by_name_and_tag(self, detector_id, name, tag):</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="comment"># Input validation</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(detector_id):</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: &quot;</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                            <span class="stringliteral">&quot;detector_id should be String&quot;</span>)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (self.__validate_str(name) <span class="keywordflow">and</span> self.__validate_str(tag)):</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct form of input: &quot;</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                            <span class="stringliteral">&quot;name and tag should be String&quot;</span>)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="comment"># Input sanitization</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        name = self.__sanitize_str(name)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        tag = self.__sanitize_str(tag)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="comment"># Get the detector of the specified detector_id</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            detector_wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            detector = self.__get_detector(detector_wrapper, detector_id)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The requested detector &#39;&quot;</span> + detector_id + <span class="stringliteral">&quot;&#39; does not exist.&quot;</span>)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="comment"># Query the condition where the &#39;name&#39; and &#39;tag&#39; equal the specified name and tag</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            condition = detector.conditions.get(name=name, tag=tag)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">except</span> DoesNotExist:</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="comment"># Convert the internal Condition object to a generic Python dict type</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">return</span> loads(condition.to_json())</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a29d9b0593780d8142ed32281e68b8a6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29d9b0593780d8142ed32281e68b8a6e">&#9670;&nbsp;</a></span>get_conditions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.get_conditions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list with all condition dictionaries associated with a detector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector for which the conditions must be retrieved (i.e. 'muonflux/driftTubes'). </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">List</td><td>A list with condition dictionaries adhering to the following specification: Condition = { 'name': String, 'tag': String, 'type': String, 'collected_at': datetime, 'valid_since': datetime, 'valid_until': datetime, 'values': mixed } </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#afc07a6dc371a9573abf14c012bb1bdee">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00505">505</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keyword">def </span>get_conditions(self, detector_id):</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(detector_id):</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">raise</span> TypeError(</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                <span class="stringliteral">&quot;Please pass the correct type of input: detector_id should be String&quot;</span>)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            detector_wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        detector = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            detector = self.__get_detector(detector_wrapper, detector_id)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The requested detector &#39;&quot;</span> + detector_id + <span class="stringliteral">&quot;&#39; does not exist.&quot;</span>)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        conditions_list = []</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="comment"># Iterate over all conditions in the detector and append to conditions_list</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">for</span> condition <span class="keywordflow">in</span> detector.conditions:</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="comment"># Convert the internal Condition object(s) to a generic Python dict type</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            conditions_list.append(loads(condition.to_json()))</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">if</span> conditions_list:</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="keywordflow">return</span> conditions_list</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf26c095215e22cc56ad8a39b47bde2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf26c095215e22cc56ad8a39b47bde2c">&#9670;&nbsp;</a></span>get_conditions_by_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.get_conditions_by_name </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list with condition dictionaries having a specific name for a given detector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector for which the conditions must be retrieved (i.e. 'muonflux/driftTubes'). </td></tr>
    <tr><td class="paramname">name</td><td>String specifying the name of the conditions to be retrieved (e.g. 'strawPositions'). </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">List</td><td>A list with condition dictionaries adhering to the following specification: Condition = { 'name': String, 'tag': String, 'type': String, 'collected_at': datetime, 'valid_since': datetime, 'valid_until': datetime, 'values': mixed } </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#a7bc30bb49a244a66054e07a3f944db6e">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00536">536</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keyword">def </span>get_conditions_by_name(self, detector_id, name):</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="comment"># Input validation</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(detector_id):</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: &quot;</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                            <span class="stringliteral">&quot;detector_id should be String&quot;</span>)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(name):</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct form of input: &quot;</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                            <span class="stringliteral">&quot;name should be String&quot;</span>)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="comment"># Input sanitization</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        name = self.__sanitize_str(name)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="comment"># Get the detector of the specified detector_id</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            detector_wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        detector = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            detector = self.__get_detector(detector_wrapper, detector_id)</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The requested detector &#39;&quot;</span> + detector_id + <span class="stringliteral">&quot;&#39; does not exist.&quot;</span>)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="comment"># Query the condition where the &#39;name&#39; equals the specified name</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        conditions = detector.conditions.filter(name=name)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> conditions:</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="comment"># Convert the internal Condition object(s) to a generic Python dict type</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        condition_dicts = []</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">for</span> condition <span class="keywordflow">in</span> conditions:</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            condition_dicts.append(loads(condition.to_json()))</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">return</span> condition_dicts</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a75894b572715aca97ed97c2fea705420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75894b572715aca97ed97c2fea705420">&#9670;&nbsp;</a></span>get_conditions_by_name_and_validity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.get_conditions_by_name_and_validity </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start_date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>end_date</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list with condition dictionaries associated with a detector that are valid on the specified date. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector for which the condition must be retrieved (i.e. 'muonflux/driftTubes'). </td></tr>
    <tr><td class="paramname">name</td><td>String specifying the name of the conditions to be retrieved (e.g. 'strawPositions'). </td></tr>
    <tr><td class="paramname">start_date</td><td>Timestamp specifying a start of a date/time range for which conditions must be valid. Can be of type String or datetime. </td></tr>
    <tr><td class="paramname">end_date</td><td>(optional) Timestamp specifying the end of a date/time range for which conditions must be valid. If not specified then we will query for validity on the start_date. Can be of type String or datetime </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">List</td><td>A list with condition dictionaries adhering to the following specification: Condition = { 'name': String, 'tag': String, 'type': String, 'collected_at': datetime, 'valid_since': datetime, 'valid_until': datetime, 'values': mixed } </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#aea84dc968b3f9c9cce574c633ccf375b">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00616">616</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keyword">def </span>get_conditions_by_name_and_validity(self, detector_id, name, start_date, end_date=None):</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="comment"># Input validation</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(detector_id):</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: &quot;</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                            <span class="stringliteral">&quot;detector_id should be String&quot;</span>)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (self.__validate_str(name) <span class="keywordflow">and</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                self.__validate_interval_parameters(start_date) <span class="keywordflow">and</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                (self.__validate_interval_parameters(end_date) <span class="keywordflow">or</span> end_date <span class="keywordflow">is</span> <span class="keywordtype">None</span>)):</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the valid input type: name should be String, &quot;</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                            <span class="stringliteral">&quot;dates could be either datetime or String type.&quot;</span>)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="comment"># Input sanitization</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        name = self.__sanitize_str(name)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="comment"># Converting all dates given as a String to a datetime object</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">if</span> self.__validate_str(start_date):</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            start_date = self.__convert_date(start_date)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">elif</span> self.__validate_datetime(start_date):</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            start_date = start_date.replace(microsecond=0)  <span class="comment"># Strip off the microseconds</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">if</span> self.__validate_str(end_date):</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            end_date = self.__convert_date(end_date)</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">elif</span> self.__validate_datetime(end_date):</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            end_date = end_date.replace(microsecond=0)  <span class="comment"># Strip off the microseconds</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="comment"># Check for a valid interval</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">if</span> end_date <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> start_date <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            <span class="keywordflow">if</span> start_date &gt; end_date:</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Invalid validity interval&quot;</span>)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="comment"># Get the detector of the specified detector_id</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            detector_wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        detector = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            detector = self.__get_detector(detector_wrapper, detector_id)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The requested detector &#39;&quot;</span> + detector_id + <span class="stringliteral">&quot;&#39; does not exist.&quot;</span>)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="comment"># Query the condition where the &#39;name&#39; equals the specified name</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        conditions = detector.conditions.filter(name=name)</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="comment"># Loop over all conditions and check whether they are valid within the specified range</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        result_list = []</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">for</span> condition <span class="keywordflow">in</span> conditions:</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <span class="comment"># Check if start_date is within the condition validation range</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">if</span> condition.valid_since &lt;= start_date &lt;= condition.valid_until:</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                <span class="comment"># Check if end_date is set</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">if</span> end_date <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                    <span class="comment"># If end_date is specified it should also be within the condition</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    <span class="comment"># validation range</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    <span class="keywordflow">if</span> condition.valid_since &lt;= end_date &lt;= condition.valid_until:</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        result_list.append(condition)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    result_list.append(condition)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> result_list:</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="comment"># Convert the internal Condition object(s) to a generic Python dict type</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        condition_dicts = []</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">for</span> condition <span class="keywordflow">in</span> result_list:</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            condition_dicts.append(loads(condition.to_json()))</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">return</span> condition_dicts</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab83d2e5e1d258100c9558df704d813e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab83d2e5e1d258100c9558df704d813e5">&#9670;&nbsp;</a></span>get_conditions_by_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.get_conditions_by_tag </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list with condition dictionaries having a specific tag for a given detector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector for which the condition must be retrieved (i.e. 'muonflux/driftTubes'). </td></tr>
    <tr><td class="paramname">tag</td><td>String specifying the tag of the condition to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">List</td><td>A list with condition dictionaries adhering to the following specification: Condition = { 'name': String, 'tag': String, 'type': String, 'collected_at': datetime, 'valid_since': datetime, 'valid_until': datetime, 'values': mixed } </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#a201eb515dd0482660937b5a145966c9a">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00576">576</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keyword">def </span>get_conditions_by_tag(self, detector_id, tag):</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment"># Input validation</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(detector_id):</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: &quot;</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                            <span class="stringliteral">&quot;detector_id should be String&quot;</span>)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(tag):</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct format of input: &quot;</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                            <span class="stringliteral">&quot;tag should be String&quot;</span>)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="comment"># Input sanitization</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        tag = self.__sanitize_str(tag)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="comment"># Get the detector of the specified detector_id</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            detector_wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        detector = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            detector = self.__get_detector(detector_wrapper, detector_id)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The requested detector &#39;&quot;</span> + detector_id + <span class="stringliteral">&quot;&#39; does not exist.&quot;</span>)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment"># Query the condition where the &#39;tag&#39; equals the specified tag</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        conditions = detector.conditions.filter(tag=tag)</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> conditions:</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="comment"># Convert the internal Condition object(s) to a generic Python dict type</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        condition_dicts = []</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">for</span> condition <span class="keywordflow">in</span> conditions:</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            condition_dicts.append(loads(condition.to_json()))</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">return</span> condition_dicts</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7516bd67d0c3dc95b1f9ed3e75a59d75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7516bd67d0c3dc95b1f9ed3e75a59d75">&#9670;&nbsp;</a></span>get_detector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.get_detector </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a detector dictionary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector to retrieve (i.e. 'muonflux/driftTubes'). </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Dict</td><td>A dictionary adhering to the following specification: Detector = { 'name': String, 'subdetectors': List of Detector, 'conditions': List of Condition } </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#a5cc41995cdcbc102935889195b421931">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00290">290</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keyword">def </span>get_detector(self, detector_id):</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">if</span> detector_id == <span class="stringliteral">&quot;&quot;</span>:</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Please specify a valid detector id. A detector id cannot be empty.&quot;</span>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(detector_id):</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: detector_id &quot;</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                            <span class="stringliteral">&quot;should be String&quot;</span>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        detector_id = self.__sanitize_path(detector_id)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            detector_wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            detector = self.__get_detector(detector_wrapper, detector_id)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The requested detector &quot;</span> + detector_id + <span class="stringliteral">&quot; does not exist.&quot;</span>)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="comment"># Convert the internal Detector object to a generic Python dict type</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">return</span> loads(detector.to_json())</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d3f95e50f620170e5d783c4f6bb78bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d3f95e50f620170e5d783c4f6bb78bf">&#9670;&nbsp;</a></span>list_detectors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.list_detectors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>parent_id</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list with all the detector names in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>(optional) String identifying the parent detector to retrieve the (sub)detector names for (i.e. 'muonflux/driftTubes'). </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If parent_id does not exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">List</td><td>A list with (string) names of detectors under the specified parent. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#aadc6d60bab40a74912abb9c7270cebeb">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00259">259</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keyword">def </span>list_detectors(self, parent_id=None):</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        detector_list = []</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> parent_id:</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            detector_wrapper_list = DetectorWrapper.objects.all()</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">for</span> wrapper <span class="keywordflow">in</span> detector_wrapper_list:</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                detector_list.append(<a class="code" href="namespaceadd__noise__to__field.html#ac8c461fc99cff345995bf60fcdfefa01">str</a>(wrapper.detector.name))</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment"># This executes when a particular parent_id is provided.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_path(parent_id):</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: parent_id, &quot;</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                <span class="stringliteral">&quot;parent_id should be of String type&quot;</span>)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                wrapper = self.__get_wrapper(parent_id)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                 parent_id,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                 <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            detector = self.__get_detector(wrapper, parent_id)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            path = self.__sanitize_path(parent_id)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">for</span> subdetector <span class="keywordflow">in</span> detector.subdetectors:</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                detector_list.append(<a class="code" href="namespaceadd__noise__to__field.html#ac8c461fc99cff345995bf60fcdfefa01">str</a>(path + <span class="stringliteral">&quot;/&quot;</span> + subdetector.name))</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">return</span> detector_list</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="ttc" id="anamespaceadd__noise__to__field_html_ac8c461fc99cff345995bf60fcdfefa01"><div class="ttname"><a href="namespaceadd__noise__to__field.html#ac8c461fc99cff345995bf60fcdfefa01">add_noise_to_field.str</a></div><div class="ttdeci">str</div><div class="ttdef"><b>Definition:</b> <a href="add__noise__to__field_8py_source.html#l00053">add_noise_to_field.py:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a58c0c1791700889a3b5e4ce18db17278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58c0c1791700889a3b5e4ce18db17278">&#9670;&nbsp;</a></span>remove_detector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.remove_detector </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a detector from the database. </p>
<p>Caution: all conditions associated with this detector will be permanently removed as well! </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector to remove (i.e. 'muonflux/driftTubes'). </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#a17710a1b96a32e5254f4a66cf1a8686a">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00374">374</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keyword">def </span>remove_detector(self, detector_id):</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(detector_id):</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: detector_id should be String&quot;</span>)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span> detector_id == <span class="stringliteral">&quot;&quot;</span>:</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Please provide the correct input for detector_id: detector_id &quot;</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                             <span class="stringliteral">&quot;cannot be an empty String&quot;</span>)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        detector_id = self.__sanitize_path(detector_id)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        detector_names = self.__split_name(detector_id)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="comment"># If we want to remove a root detector</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span> len(detector_names) &lt; 2:</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                self.__remove_wrapper(detector_names[0])</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                 detector_names[0],</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                 <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">return</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="comment"># Otherwise, when we remove a subdetector</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        path = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, len(detector_names) - 1):</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            path = path + <span class="stringliteral">&quot;/&quot;</span> + detector_names[i]</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        path = self.__sanitize_path(path)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        detector = self.__get_detector(wrapper, path)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        subdetectors = detector.subdetectors</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="comment"># Find the subdetector and remove it from the list</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, len(subdetectors)):</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span> subdetectors[i].name == detector_names[-1]:</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                detector.subdetectors.pop(i)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="keywordflow">break</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        wrapper.save()</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a528ec1223b38c9e4c92d872568a3c7d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a528ec1223b38c9e4c92d872568a3c7d3">&#9670;&nbsp;</a></span>update_condition_by_name_and_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.update_condition_by_name_and_tag </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>detector_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>type</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>valid_since</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>valid_until</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the type, valid_since and valid_until values of a specific condition belonging to a detector, identified by condition name and tag. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detector_id</td><td>String identifying the detector for which the condition must be updated (i.e. 'muonflux/driftTubes'). </td></tr>
    <tr><td class="paramname">name</td><td>String specifying the name of the conditions to be updated (e.g. 'strawPositions'). </td></tr>
    <tr><td class="paramname">tag</td><td>String specifying the tag of the condition to be updated. </td></tr>
    <tr><td class="paramname">type</td><td>(optional) String specifying the type of condition (e.g. 'calibration'). </td></tr>
    <tr><td class="paramname">valid_since</td><td>(optional) Timestamp specifying the date/time as of when the condition is valid. Can be of type String or datetime. </td></tr>
    <tr><td class="paramname">valid_until</td><td>(optional) Timestamp specifying the date/time up until the condition is valid. Can be of type String or datetime. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TypeError</td><td>If input type is not as specified. </td></tr>
    <tr><td class="paramname">ValueError</td><td>If detector_id does not exist. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classconditionsDatabase_1_1interface_1_1APIInterface.html#acf6f6f4d9a1b4814445531372d515878">conditionsDatabase.interface.APIInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00770">770</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                                         type=<span class="keywordtype">None</span>, valid_since=<span class="keywordtype">None</span>, valid_until=<span class="keywordtype">None</span>):</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="comment"># Input validation</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.__validate_str(detector_id):</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;Please pass the correct type of input: &quot;</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                            <span class="stringliteral">&quot;detector_id should be String&quot;</span>)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> ((self.__validate_interval_parameters(valid_since) <span class="keywordflow">or</span> valid_since <span class="keywordflow">is</span> <span class="keywordtype">None</span>) <span class="keywordflow">and</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                (self.__validate_interval_parameters(valid_until) <span class="keywordflow">or</span> valid_until <span class="keywordflow">is</span> <span class="keywordtype">None</span>) <span class="keywordflow">and</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                (self.__validate_str(type) <span class="keywordflow">or</span> type <span class="keywordflow">is</span> <span class="keywordtype">None</span>) <span class="keywordflow">and</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                 self.__validate_str(name) <span class="keywordflow">and</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                 self.__validate_str(tag)):</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="keywordflow">raise</span> TypeError(</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                <span class="stringliteral">&quot;Please pass correct form of input: for valid_since and/or valid_until, &quot;</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                <span class="stringliteral">&quot;they could be String, datetime or None. Only String is accepted for name, &quot;</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                <span class="stringliteral">&quot;tag and type.&quot;</span>)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="comment"># Converting all dates given as a String to a datetime object</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">if</span> self.__validate_str(valid_until):</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            valid_until = self.__convert_date(valid_until)</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">elif</span> self.__validate_datetime(valid_until):</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="comment"># Strip off the microseconds</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            valid_until = valid_until.replace(microsecond=0)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="keywordflow">if</span> self.__validate_str(valid_since):</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            valid_since = self.__convert_date(valid_since)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">elif</span> self.__validate_datetime(valid_since):</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <span class="comment"># Strip off the microseconds</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            valid_since = valid_since.replace(microsecond=0)</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordflow">if</span> valid_until <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> valid_since <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="keywordflow">if</span> valid_since &gt; valid_until:</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Invalid validity interval&quot;</span>)</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="comment"># Input sanitization</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        name = self.__sanitize_str(name)</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        tag = self.__sanitize_str(tag)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">if</span> self.__validate_str(type):</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            type = self.__sanitize_str(type)</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <span class="comment"># Get the detector of the specified detector_id</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            detector_wrapper = self.__get_wrapper(detector_id)</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The detector &#39;&quot;</span>,</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                             detector_id,</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                             <span class="stringliteral">&quot;&#39; does not exist in the database&quot;</span>)</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        detector = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            detector = self.__get_detector(detector_wrapper, detector_id)</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The requested detector &#39;&quot;</span> + detector_id + <span class="stringliteral">&quot;&#39; does not exist.&quot;</span>)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        condition = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            condition = detector.conditions.get(name=name, tag=tag)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">except</span> DoesNotExist:</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;No condition with this name and tag can be found&quot;</span>)</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="comment"># Only update fields that are not None</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">if</span> type <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            condition.type = type</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">if</span> valid_since <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            condition.valid_since = valid_since</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">if</span> valid_until <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            condition.valid_until = valid_until</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        detector_wrapper.save()</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a33aaf1caae041ca9f96ea002f80d2420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33aaf1caae041ca9f96ea002f80d2420">&#9670;&nbsp;</a></span>__db_connection</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">conditionsDatabase.databases.mongodb.mongodbadapter.MongoToCDBAPIAdapter.__db_connection = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mongodbadapter_8py_source.html#l00032">32</a> of file <a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>conditionsDatabase/databases/mongodb/<a class="el" href="mongodbadapter_8py_source.html">mongodbadapter.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceconditionsDatabase.html">conditionsDatabase</a></li><li class="navelem"><a class="el" href="namespaceconditionsDatabase_1_1databases.html">databases</a></li><li class="navelem"><a class="el" href="namespaceconditionsDatabase_1_1databases_1_1mongodb.html">mongodb</a></li><li class="navelem"><a class="el" href="namespaceconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter.html">mongodbadapter</a></li><li class="navelem"><a class="el" href="classconditionsDatabase_1_1databases_1_1mongodb_1_1mongodbadapter_1_1MongoToCDBAPIAdapter.html">MongoToCDBAPIAdapter</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
